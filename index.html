<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedPlex Academy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Font Awesome for additional icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- KaTeX for equation rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <style>
        :root {
            /* Beautiful Blue Color Scheme - Keeping exact dimensions */
            --primary: #1E3A8A; /* Navy Blue */
            --secondary: #3B82F6; /* Vibrant Blue */
            --accent: #0EA5E9; /* Sky Blue */
            --light: #E0F2FE; /* Light Blue */
            --dark: #0F172A; /* Dark Blue */
            --success: #10B981; /* Emerald Green */
            --warning: #F59E0B; /* Amber */
            --info: #06B6D4; /* Cyan */
            --background: #F8FAFC; /* Light Gray-Blue */
            --card-bg: #FFFFFF;
            --text-primary: #1E293B; /* Slate Blue */
            --text-secondary: #475569; /* Slate Gray */
            --border-radius: 5px;
            --shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s ease;
            --compact-spacing: 3px;
            --contact-primary: #2563EB; /* Blue */
            --contact-secondary: #3B82F6; /* Light Blue */
            --vibrant-1: #1D4ED8; /* Royal Blue */
            --vibrant-2: #0EA5E9; /* Sky Blue */
            --vibrant-3: #6366F1; /* Indigo */
            --vibrant-4: #8B5CF6; /* Violet */
            --vibrant-5: #06B6D4; /* Cyan */
            --learning-text: linear-gradient(45deg, #1D4ED8, #0EA5E9, #3B82F6);
            --quiz-bg: linear-gradient(135deg, #1D4ED8, #6366F1);
            --learning-bg: linear-gradient(135deg, #0EA5E9, #06B6D4);
        }

        .dark-mode {
            --primary: #3B82F6;
            --secondary: #60A5FA;
            --accent: #38BDF8;
            --light: #1E293B;
            --dark: #F1F5F9;
            --background: #0F172A;
            --card-bg: #1E293B;
            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --contact-primary: #60A5FA;
            --contact-secondary: #93C5FD;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            position: relative;
            font-size: 8.1px;
            line-height: 1.1;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 4.86px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            padding: 6.48px;
            border-radius: var(--border-radius);
            margin-bottom: 6.48px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 60%);
            animation: pulse 15s infinite linear;
        }

        @keyframes pulse {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .logo {
            text-align: center;
            margin-bottom: 4.32px;
            position: relative;
            z-index: 2;
        }

        .logo h1 {
            font-size: 0.972rem;
            font-weight: 800;
            margin-bottom: 1.62px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            background: linear-gradient(45deg, #FFFFFF, #BFDBFE, #93C5FD);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo p {
            font-weight: 500;
            font-size: 0.486rem;
            opacity: 0.9;
            color: #E0F2FE;
        }

        .header-content {
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .header-content h1 {
            font-size: 0.648rem;
            margin-bottom: 4.32px;
            color: #FFFFFF;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.5);
        }

        .header-content p {
            font-size: 0.486rem;
            line-height: 1.1;
            max-width: 800px;
            margin: 0 auto;
            color: #E0F2FE;
        }

        /* Hamburger Menu */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 15.12px;
            height: 15.12px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            position: absolute;
            top: 6.48px;
            right: 6.48px;
            z-index: 10;
        }

        .menu-toggle span {
            width: 15.12px;
            height: 1.62px;
            background: white;
            border-radius: 1.62px;
            transition: var(--transition);
            position: relative;
            transform-origin: center;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(3.24px, 3.24px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(4.32px, -4.32px);
        }

        /* Navigation Styles */
        .nav-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 6.48px;
            position: relative;
        }

        .nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4.86px;
        }

        .nav-header h2 {
            font-size: 0.729rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .theme-toggle {
            background: var(--card-bg);
            border: none;
            width: 25.92px;
            height: 12.96px;
            border-radius: 12.96px;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            padding: 1.62px;
            box-shadow: var(--shadow);
            border: 1px solid var(--vibrant-2);
        }

        .theme-toggle span {
            width: 9.72px;
            height: 9.72px;
            border-radius: 50%;
            background: var(--vibrant-1);
            position: absolute;
            transition: var(--transition);
            left: 1.62px;
        }

        .theme-toggle.dark span {
            left: calc(100% - 11.34px);
            background: var(--vibrant-5);
        }

        .main-nav {
            display: flex;
            gap: 2.43px;
            flex-wrap: wrap;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: 2.43px;
            padding: 4.05px 4.86px;
            background: var(--card-bg);
            border: none;
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border-left: 2px solid var(--vibrant-1);
        }

        .nav-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 1.5px 3px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, var(--card-bg), #E0F2FE);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-2));
            color: white;
            border-left: 2px solid white;
        }

        /* Panel Styles */
        .panel {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 4.86px;
            box-shadow: var(--shadow);
            margin-bottom: 6.48px;
            transition: var(--transition);
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4.86px;
            padding-bottom: 4.05px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.3);
        }

        .panel-title {
            font-size: 0.648rem;
            font-weight: 700;
            color: var(--vibrant-1);
            display: flex;
            align-items: center;
            gap: 2.43px;
        }

        .panel-actions {
            display: flex;
            gap: 2.43px;
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 2.43px;
            padding: 2.43px 4.86px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--vibrant-2), var(--vibrant-4));
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--vibrant-4), #F59E0B);
            transform: translateY(-1px);
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 4.86px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            margin-bottom: 4.86px;
            border-left: 3px solid var(--vibrant-1);
        }

        .card:hover {
            transform: translateY(-1.5px);
            box-shadow: 0 2.43px 6.48px rgba(30, 58, 138, 0.1);
            border-left: 3px solid var(--vibrant-3);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 2.43px;
            margin-bottom: 4.05px;
            padding-bottom: 4.05px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.2);
        }

        .card-title {
            font-size: 0.567rem;
            font-weight: 700;
            color: var(--vibrant-1);
        }

        /* Grid Layout */
        .grid {
            display: grid;
            gap: 4.86px;
        }

        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }

        .grid-3 {
            grid-template-columns: 1fr 1fr 1fr;
        }

        /* Footer Styles */
        footer {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-1));
            color: white;
            padding: 9.72px 0;
            margin-top: auto;
            font-size: 0.486rem;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 6.48px;
            margin-top: 6.48px;
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.3s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(6.48px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease forwards;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-6.48px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Quiz Cards */
        .quiz-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .quiz-info {
            flex-grow: 1;
            margin-bottom: 4.86px;
        }

        .quiz-id {
            font-weight: 700;
            font-size: 0.567rem;
            color: var(--vibrant-1);
            margin-bottom: 1.62px;
        }

        .quiz-subject {
            font-size: 0.486rem;
            color: var(--vibrant-3);
            margin-bottom: 2.43px;
            font-weight: 600;
        }

        .quiz-chapter {
            font-size: 0.486rem;
            color: var(--vibrant-2);
            margin-bottom: 2.43px;
            font-weight: 600;
        }

        .quiz-details {
            font-size: 0.405rem;
            color: var(--text-secondary);
            margin-bottom: 4.05px;
        }

        .start-btn {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 4.05px 6.48px;
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            text-decoration: none;
            display: block;
            width: 100%;
        }

        .start-btn:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
            transform: translateY(-1px);
        }

        /* Stats Panel */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(64.8px, 1fr));
            gap: 4.05px;
            margin-bottom: 4.86px;
        }

        .stat-item {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 4.05px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .stat-value {
            font-size: 0.729rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-label {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            font-weight: 600;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }

        /* Welcome Animation - Enhanced */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3), var(--vibrant-5));
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.8s ease;
        }

        .welcome-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .welcome-content {
            text-align: center;
            color: white;
            padding: 12.15px;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 9.72px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4.86px 16.2px rgba(0, 0, 0, 0.2);
        }

        .welcome-content h2 {
            font-size: 1.458rem;
            margin-bottom: 9.72px;
            background: linear-gradient(90deg, #ffffff, #BFDBFE, #ffffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: shimmer 2.5s infinite;
        }

        .welcome-content p {
            font-size: 0.648rem;
            margin-bottom: 12.15px;
            line-height: 1.4;
            opacity: 0.9;
        }

        .welcome-logo {
            font-size: 2.025rem;
            margin-bottom: 12.15px;
            color: #ffffff;
            text-shadow: 0 0 12.15px rgba(255, 255, 255, 0.5);
            animation: pulseWelcome 1.5s infinite;
        }

        @keyframes pulseWelcome {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shimmer {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }

        /* Registration and Login Forms */
        .auth-forms-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 9.72px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 4.86px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .auth-tab-btn {
            flex: 1;
            padding: 4.05px 6.48px;
            border: none;
            border-radius: var(--border-radius);
            background: transparent;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .auth-tab-btn.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .auth-tab-btn:hover:not(.active) {
            background: var(--light);
        }

        .auth-form {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 12.15px;
            border: 1px solid rgba(30, 58, 138, 0.2);
            margin-bottom: 9.72px;
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .auth-form-header {
            text-align: center;
            margin-bottom: 9.72px;
        }

        .auth-form-header h3 {
            font-size: 0.729rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 3.24px;
        }

        .auth-form-header p {
            font-size: 0.486rem;
            color: var(--vibrant-3);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6.48px;
            margin-bottom: 9.72px;
        }

        .form-group {
            margin-bottom: 6.48px;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-group label {
            display: block;
            margin-bottom: 1.62px;
            font-weight: 600;
            font-size: 0.486rem;
            color: var(--vibrant-1);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 4.05px 4.86px;
            border: 1px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            font-size: 0.486rem;
            background: var(--light);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--vibrant-1);
            box-shadow: 0 0 0 1.62px rgba(30, 58, 138, 0.2);
        }

        .form-note {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            margin-top: 2.43px;
        }

        .auth-submit-btn {
            width: 100%;
            padding: 6.48px;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 0.567rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }

        .auth-submit-btn:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
            transform: translateY(-1px);
        }

        .auth-submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .auth-message {
            margin-top: 9.72px;
            padding: 6.48px;
            border-radius: var(--border-radius);
            font-size: 0.486rem;
            text-align: center;
            display: none;
        }

        .auth-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .auth-error {
            background: #fee2e2;
            color: #7f1d1d;
            border: 1px solid #fecaca;
        }

        /* Student Dashboard */
        .student-dashboard {
            display: none;
        }

        .student-dashboard.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .student-welcome {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            color: white;
            text-align: center;
        }

        .student-welcome h3 {
            font-size: 0.729rem;
            margin-bottom: 3.24px;
            color: #FFFFFF;
        }

        .student-welcome p {
            font-size: 0.486rem;
            opacity: 0.9;
        }

        .student-info {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .student-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6.48px;
            font-size: 0.486rem;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 3.24px 0;
            border-bottom: 1px dashed rgba(30, 58, 138, 0.2);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: var(--vibrant-1);
        }

        .info-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Password Modal */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .password-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .password-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4.05px 12.15px rgba(0, 0, 0, 0.2);
            transform: translateY(-16.2px);
            transition: transform 0.3s ease;
            border: 2px solid var(--vibrant-1);
        }

        .password-modal.active .password-content {
            transform: translateY(0);
        }

        .password-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6.48px;
            padding-bottom: 4.86px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.3);
        }

        .password-title {
            font-size: 0.648rem;
            font-weight: 700;
            color: var(--vibrant-1);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 0.729rem;
            color: var(--vibrant-3);
            cursor: pointer;
        }

        .password-form {
            display: flex;
            flex-direction: column;
            gap: 4.86px;
        }

        .password-hint {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            margin-top: 2.43px;
        }

        .error-message {
            color: var(--vibrant-1);
            font-size: 0.486rem;
            margin-top: 3.24px;
            display: none;
        }

        /* Homepage Content Styles */
        .homepage-content {
            line-height: 1.4;
        }

        .homepage-section {
            margin-bottom: 6.48px;
        }

        .homepage-section h3 {
            font-size: 0.729rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 4.05px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.3);
            padding-bottom: 2.43px;
        }

        .homepage-section p {
            font-size: 0.567rem;
            margin-bottom: 4.05px;
        }

        .syllabus-table {
            width: 100%;
            border-collapse: collapse;
            margin: 4.86px 0;
            font-size: 0.567rem;
        }

        .syllabus-table th, .syllabus-table td {
            border: 1px solid var(--vibrant-2);
            padding: 4.05px;
            text-align: left;
        }

        .syllabus-table th {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .services-list {
            list-style-type: none;
            padding-left: 0;
        }

        .services-list li {
            font-size: 0.567rem;
            margin-bottom: 2.43px;
            display: flex;
            align-items: center;
            gap: 4.05px;
        }

        .services-list li i {
            color: var(--vibrant-1);
        }

        /* Developer Info Section */
        .developer-info {
            margin-top: 9.72px;
            padding-top: 6.48px;
            border-top: 1px solid rgba(30, 58, 138, 0.3);
        }

        /* About Us Enhanced Styles */
        .about-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 9.72px;
            margin-top: 9.72px;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 3.24px 9.72px rgba(30, 58, 138, 0.1);
            border-color: var(--vibrant-1);
        }

        .feature-icon {
            font-size: 1.62rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 6.48px;
        }

        .feature-title {
            font-size: 0.648rem;
            font-weight: 700;
            color: var(--vibrant-1);
            margin-bottom: 4.05px;
        }

        .feature-description {
            font-size: 0.486rem;
            color: var(--vibrant-3);
        }

        /* Contact Us Enhanced Styles */
        .contact-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 12.15px;
        }

        .team-head {
            text-align: center;
            margin-bottom: 9.72px;
        }

        .head-image {
            width: 97.2px;
            height: 97.2px;
            border-radius: 50%;
            object-fit: cover;
            border: 3.24px solid var(--vibrant-1);
            margin-bottom: 6.48px;
            box-shadow: 0 3.24px 9.72px rgba(30, 58, 138, 0.3);
        }

        .head-name {
            font-size: 0.729rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 1.62px;
        }

        .head-title {
            font-size: 0.567rem;
            color: var(--vibrant-3);
        }

        /* Dr. Hamad Section */
        .dr-hamad-section {
            display: flex;
            align-items: center;
            gap: 9.72px;
            background: linear-gradient(135deg, var(--light), #E0F2FE);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.3);
        }

        .dr-hamad-image {
            width: 97.2px;
            height: 97.2px;
            border-radius: 50%;
            object-fit: cover;
            border: 3.24px solid var(--vibrant-1);
            box-shadow: 0 3.24px 9.72px rgba(30, 58, 138, 0.3);
        }

        .dr-hamad-info {
            flex: 1;
        }

        .dr-hamad-name {
            font-size: 0.729rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 3.24px;
        }

        .dr-hamad-title {
            font-size: 0.567rem;
            color: var(--vibrant-3);
            margin-bottom: 4.05px;
        }

        .dr-hamad-description {
            font-size: 0.486rem;
            color: var(--text-primary);
        }

        /* FAQ Styles */
        .faq-container {
            margin-top: 9.72px;
        }

        .faq-item {
            margin-bottom: 6.48px;
            border: 1px solid rgba(30, 58, 138, 0.2);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .faq-question {
            padding: 6.48px 9.72px;
            background: var(--light);
            font-weight: 600;
            font-size: 0.567rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            padding: 6.48px 9.72px;
            font-size: 0.486rem;
            background: var(--card-bg);
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
            color: var(--vibrant-1);
        }

        /* Contact Form Styles */
        .contact-form-container {
            background: var(--card-bg);
            padding: 19.44px;
            border-radius: 7.29px;
            box-shadow: 0 4.86px 12.15px rgba(30, 58, 138, 0.1);
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .contact-header {
            text-align: center;
            margin-bottom: 12.15px;
        }

        .contact-header h2 {
            background: linear-gradient(45deg, var(--contact-primary), var(--contact-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0;
            font-size: 0.972rem;
        }

        .contact-header p {
            color: var(--vibrant-3);
            font-size: 0.567rem;
        }

        .contact-form-group {
            margin-bottom: 9.72px;
        }

        .contact-form-group label {
            display: block;
            margin-bottom: 2.43px;
            font-weight: 600;
            color: var(--vibrant-1);
            font-size: 0.486rem;
        }

        .contact-form-group input, 
        .contact-form-group select, 
        .contact-form-group textarea {
            width: 100%;
            padding: 6.48px;
            border: 1px solid var(--vibrant-2);
            border-radius: 3.24px;
            box-sizing: border-box;
            font-size: 0.567rem;
            background: var(--light);
            color: var(--text-primary);
        }

        .contact-form-group textarea {
            resize: vertical;
            height: 48.6px;
        }

        .contact-submit-btn {
            width: 100%;
            padding: 8.1px;
            background: linear-gradient(to right, var(--contact-primary), var(--contact-secondary));
            color: white;
            border: none;
            border-radius: 3.24px;
            font-size: 0.648rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .contact-submit-btn:hover {
            opacity: 0.9;
        }

        .contact-submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        #contact-status-message {
            margin-top: 9.72px;
            padding: 6.48px;
            border-radius: 2.43px;
            display: none;
            text-align: center;
            font-size: 0.567rem;
        }

        .contact-success { 
            background: #d1fae5; 
            color: #155724; 
        }
        
        .contact-error { 
            background: #f8d7da; 
            color: #721c24; 
        }

        /* NEW: Learning Mode MCQs Bank Tab Styles */
        .bank-container {
            display: flex;
            flex-direction: column;
            gap: 4.86px;
        }

        .bank-mode-selector {
            display: flex;
            gap: 2.43px;
            margin-bottom: 4.86px;
            background: var(--card-bg);
            padding: 4.86px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .mode-btn {
            flex: 1;
            padding: 3.24px 4.86px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 0.486rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .mode-btn:hover:not(.active) {
            background: var(--light);
        }

        .bank-subject-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 4.05px;
            margin-bottom: 9.72px;
        }

        .subject-btn {
            background: var(--card-bg);
            border: 0.75px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            padding: 4.86px;
            font-size: 0.486rem;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2.43px;
        }

        .subject-btn:hover {
            background: var(--light);
            transform: translateY(-1px);
        }

        .subject-btn.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border-color: var(--vibrant-1);
        }

        /* Learning Mode Specific Styles */
        .learning-question {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 6.48px;
            border: 0.75px solid var(--vibrant-2);
            box-shadow: var(--shadow);
            font-size: 0.567rem !important;
            line-height: 1.3;
        }

        .learning-question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 4.86px;
            padding-bottom: 4.05px;
            border-bottom: 0.75px solid var(--vibrant-2);
        }

        .learning-question-id {
            font-weight: 900;
            font-size: 0.486rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .learning-question-text {
            margin-bottom: 6.48px;
            font-weight: 800;
            color: var(--text-primary);
            font-size: 0.567rem !important;
            border-left: 2px solid var(--vibrant-1);
            padding-left: 6.48px;
        }

        .learning-options {
            margin: 6.48px 0;
        }

        .learning-option {
            padding: 4.05px 6.48px;
            margin: 2.43px 0;
            border: 0.5px solid var(--vibrant-2);
            border-radius: 3.24px;
            background: var(--light);
            font-size: 0.567rem !important;
            font-weight: 600;
        }

        .learning-option.correct {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border-color: var(--success);
            color: #065f46;
            font-weight: bold;
            border-width: 1.5px;
        }

        .learning-reasoning {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 3.24px;
            padding: 6.48px;
            margin-top: 6.48px;
            border-left: 2.43px solid var(--info);
            font-size: 0.486rem;
            font-weight: 600;
        }

        .learning-reasoning-title {
            font-weight: 700;
            margin-bottom: 3.24px;
            color: var(--vibrant-1);
            display: flex;
            align-items: center;
            gap: 2.43px;
        }

        .learning-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.405rem;
            color: var(--vibrant-3);
            margin-top: 4.86px;
            padding-top: 4.05px;
            border-top: 0.75px dashed var(--vibrant-2);
        }

        /* MEDPLEX QUIZZES SYSTEM STYLES (from second file) */
        .quiz-system-container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }

        .quiz-system-logo {
            text-align: center;
            margin-bottom: 9px;
        }

        .quiz-system-logo h1 {
            font-size: 0.81rem;
            font-weight: 800;
            color: var(--dark);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.08);
            margin-bottom: 1.5px;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .quiz-system-logo p {
            color: var(--vibrant-1);
            font-weight: 600;
            font-size: 0.486rem;
        }

        .quiz-system-page {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9px;
            box-shadow: var(--shadow);
            width: 100%;
            display: none;
            position: relative;
            border: 1px solid rgba(30, 58, 138, 0.2);
            margin-bottom: 6.48px;
        }

        .quiz-system-page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .quiz-system-form-group {
            margin-bottom: 6px;
        }

        .quiz-system-form-label {
            display: block;
            margin-bottom: 1.5px;
            font-weight: 600;
            color: var(--vibrant-1);
            font-size: 0.486rem;
        }

        .quiz-system-form-input, .quiz-system-form-select {
            width: 100%;
            padding: 4.05px 4.86px;
            border: 1px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            font-size: 0.486rem;
            background: var(--light);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .quiz-system-form-input:focus, .quiz-system-form-select:focus {
            outline: none;
            border-color: var(--vibrant-1);
            box-shadow: 0 0 0 1.62px rgba(30, 58, 138, 0.15);
        }

        .quiz-system-input-container {
            position: relative;
        }

        .quiz-system-password-container .quiz-system-form-input {
            padding-right: 22.5px;
        }

        .quiz-system-input-icon {
            position: absolute;
            right: 7.5px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--vibrant-1);
            font-size: 0.486rem;
            cursor: pointer;
        }

        .quiz-system-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4.05px 6.48px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            gap: 3px;
            width: 100%;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 4.05px;
        }

        .quiz-system-btn:hover {
            transform: translateY(-1px);
        }

        .quiz-system-btn-primary {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .quiz-system-btn-primary:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
        }

        .quiz-system-btn-whatsapp {
            background: linear-gradient(135deg, #25d366, #128c7e);
            color: white;
        }

        .quiz-system-btn-red {
            background: linear-gradient(135deg, #ef4444, #f87171);
            color: white;
        }

        .quiz-system-status-msg {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 10px;
            border-radius: 3px;
            color: white;
            z-index: 10000;
            display: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-size: 12px;
        }

        .quiz-system-error-box {
            background: #fee2e2;
            color: #ef4444;
            padding: 3.75px 5.25px;
            border-radius: 2.25px;
            margin-top: 4.5px;
            display: none;
            font-weight: 600;
            font-size: 0.486rem;
            border-left: 2.25px solid #ef4444;
        }

        .quiz-system-success-box {
            background: #d1fae5;
            color: #10b981;
            padding: 3.75px 5.25px;
            border-radius: 2.25px;
            margin-top: 4.5px;
            display: none;
            font-weight: 600;
            font-size: 0.486rem;
            border-left: 2.25px solid #10b981;
        }

        /* Quiz Styles */
        .quiz-system-quiz-notification {
            position: fixed;
            top: 15px;
            right: 15px;
            background: var(--card-bg);
            padding: 11.25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            z-index: 1000;
            display: none;
            max-width: 225px;
            border-left: 3.75px solid #10b981;
            animation: slideInRight 0.3s ease;
            transform: translateX(100%);
        }

        .quiz-system-quiz-notification.show {
            display: block;
            transform: translateX(0);
        }

        .quiz-system-quiz-notification.warning {
            border-left-color: #f59e0b;
        }

        .quiz-system-quiz-notification.error {
            border-left-color: #ef4444;
        }

        .quiz-system-quiz-notification-content {
            display: flex;
            flex-direction: column;
            gap: 7.5px;
        }

        .quiz-system-quiz-notification-title {
            font-weight: 700;
            font-size: 0.567rem;
            color: var(--dark);
        }

        .quiz-system-quiz-notification-message {
            font-size: 0.486rem;
            color: var(--text-secondary);
        }

        .quiz-system-quiz-notification-actions {
            display: flex;
            gap: 6px;
            justify-content: flex-end;
        }

        .quiz-system-quiz-notification-btn {
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 0.486rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .quiz-system-quiz-notification-btn.primary {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .quiz-system-quiz-notification-btn.secondary {
            background: #f3f4f6;
            color: #4b5563;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .quiz-system-main-page-buttons {
            display: grid;
            gap: 6px;
            margin-top: 9px;
        }

        .quiz-system-quiz-access-section {
            display: none;
            flex-direction: column;
            gap: 6px;
            margin-top: 9px;
        }

        .quiz-system-quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
            padding-bottom: 4.5px;
            border-bottom: 1.5px solid var(--light);
        }

        .quiz-system-quiz-title-container {
            display: flex;
            flex-direction: column;
            gap: 2.25px;
            width: 80%;
        }

        .quiz-system-quiz-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            font-size: 0.486rem;
            color: var(--dark);
            font-weight: 600;
        }

        .quiz-system-timer-container {
            display: flex;
            gap: 4.5px;
            justify-content: flex-end;
            width: 100%;
        }

        .quiz-system-timer, .quiz-system-question-timer {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            padding: 2.25px 4.5px;
            border-radius: var(--border-radius);
            font-weight: 700;
            font-size: 0.486rem;
            box-shadow: var(--shadow);
            white-space: nowrap;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .quiz-system-timer.total-timer {
            background: linear-gradient(135deg, #f59e0b, #f97316);
        }

        .quiz-system-progress-container {
            width: 100%;
            height: 4.5px;
            background: #e5e7eb;
            border-radius: 2.25px;
            overflow: hidden;
            margin-bottom: 6px;
            box-shadow: var(--shadow);
        }

        .quiz-system-progress-bar {
            height: 100%;
            border-radius: 2.25px;
            transition: width 0.4s ease;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
        }

        .quiz-system-question-nav {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(10.5px, 1fr));
            gap: 2.25px;
            margin-bottom: 6px;
        }

        .quiz-system-question-nav-item {
            width: 10.5px;
            height: 10.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 2.25px;
            font-weight: 700;
            font-size: 0.405rem;
            cursor: pointer;
            background: var(--card-bg);
            border: 1.5px solid var(--light);
            transition: var(--transition);
        }

        .quiz-system-question-nav-item.current {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border-color: var(--vibrant-1);
            transform: scale(1.1);
        }

        .quiz-system-question-nav-item.solved {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border-color: #10b981;
        }

        .quiz-system-question-nav-item.visited {
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: white;
            border-color: #f59e0b;
        }

        .quiz-system-question-container {
            margin-bottom: 6px;
        }

        .quiz-system-question-text {
            font-size: 0.567rem;
            font-weight: 700;
            margin-bottom: 4.5px;
            color: var(--dark);
        }

        .quiz-system-options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3px;
            margin-bottom: 6px;
        }

        .quiz-system-option {
            padding: 3.75px 6px;
            border: 1.5px solid var(--light);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            background: var(--light);
            font-size: 0.486rem;
            position: relative;
        }

        .quiz-system-option:hover {
            border-color: var(--vibrant-1);
            background: #e0f2fe;
            transform: translateY(-1px);
        }

        .quiz-system-option.selected {
            border-color: var(--vibrant-1);
            background: #dbeafe;
        }

        .quiz-system-option.correct {
            border-color: #10b981;
            background: #d1fae5;
        }

        .quiz-system-option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .quiz-system-reasoning {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 6px;
            margin-top: 6px;
            display: none;
            border-left: 2.25px solid var(--vibrant-1);
            font-size: 0.486rem;
        }

        .quiz-system-reasoning-title {
            font-weight: 700;
            margin-bottom: 3px;
            color: var(--dark);
            font-size: 0.567rem;
        }

        .quiz-system-navigation-buttons {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-top: 9px;
        }

        .quiz-system-nav-btn {
            padding: 3.75px 5.25px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
            font-size: 0.486rem;
            display: flex;
            align-items: center;
            gap: 2.25px;
            justify-content: center;
            width: 100%;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .quiz-system-btn-back {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
        }

        .quiz-system-btn-next {
            background: linear-gradient(135deg, #1d4ed8, #3b82f6);
            color: white;
        }

        .quiz-system-btn-reasoning {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            color: white;
        }

        .quiz-system-btn-reasoning.disabled {
            background: #6b7280;
            color: white;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .quiz-system-btn-submit {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
        }

        .quiz-system-submission-message {
            background: linear-gradient(135deg, #f8fafc, #e0f2fe);
            border-radius: var(--border-radius);
            padding: 18px;
            text-align: center;
            margin-bottom: 9px;
            box-shadow: var(--shadow);
            border: 1px solid #10b981;
        }

        .quiz-system-submission-message h2 {
            font-size: 0.729rem;
            margin-bottom: 9px;
            color: #10b981;
        }

        .quiz-system-submission-message p {
            font-size: 0.567rem;
            margin-bottom: 6px;
            color: var(--dark);
        }

        .quiz-system-submission-icon {
            font-size: 1.62rem;
            color: #10b981;
            margin-bottom: 9px;
        }

        .quiz-system-quiz-type-selector {
            background: linear-gradient(135deg, #f8fafc, #e0f2fe);
            border-radius: var(--border-radius);
            padding: 9px;
            margin-top: 9px;
            border: 1px solid var(--light);
        }

        .quiz-system-quiz-type-selector h3 {
            font-size: 0.648rem;
            margin-bottom: 6px;
            color: var(--dark);
            text-align: center;
        }

        .quiz-system-subject-selection-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 4.5px;
            margin-bottom: 6px;
        }

        .quiz-system-subject-select-item {
            padding: 3.75px;
            border: 1.5px solid var(--light);
            border-radius: var(--border-radius);
            background: var(--card-bg);
            cursor: pointer;
            text-align: center;
            font-size: 0.486rem;
            transition: var(--transition);
        }

        .quiz-system-subject-select-item:hover {
            border-color: var(--vibrant-1);
            background: #e0f2fe;
        }

        .quiz-system-subject-select-item.selected {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border-color: var(--vibrant-1);
        }

        .quiz-system-mcq-count-display {
            background: #f1f5f9;
            border-radius: var(--border-radius);
            padding: 3.75px;
            font-size: 0.486rem;
            margin-top: 3.75px;
            text-align: center;
            border: 1px dashed var(--light);
        }

        .quiz-system-mcq-count-display strong {
            color: var(--dark);
        }

        .quiz-system-quick-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 9px;
            gap: 6px;
        }

        .quiz-system-stat-card {
            flex: 1;
            background: var(--card-bg);
            border-radius: 4.5px;
            padding: 6px;
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 2px solid var(--vibrant-1);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .quiz-system-stat-card.correct {
            border-top-color: #10b981;
        }

        .quiz-system-stat-card.incorrect {
            border-top-color: #ef4444;
        }

        .quiz-system-stat-card.unanswered {
            border-top-color: #f59e0b;
        }

        .quiz-system-stat-value {
            font-size: 0.81rem;
            font-weight: 800;
            margin-bottom: 1.5px;
        }

        .quiz-system-stat-label {
            font-size: 0.486rem;
            font-weight: 600;
            color: #6b7280;
        }

        .quiz-system-performance-meter {
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin: 6px 0;
        }

        .quiz-system-performance-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.4s ease;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
        }

        .quiz-system-all-mcqs-list {
            display: flex;
            flex-direction: column;
            gap: 11.25px;
        }

        .quiz-system-all-mcq-item {
            padding: 7.5px;
            border: 1px solid var(--light);
            border-radius: var(--border-radius);
            background: var(--light);
            position: relative;
        }

        .quiz-system-all-mcq-item .quiz-system-question-text {
            color: var(--dark);
            font-size: 0.567rem;
            font-weight: 700;
        }

        .quiz-system-all-mcq-options {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-top: 4.5px;
        }

        .quiz-system-all-mcq-option {
            font-size: 0.486rem;
            padding: 3px 4.5px;
            border-radius: 3px;
            border: 1px solid #e5e7eb;
        }

        .quiz-system-all-mcq-option.correct {
            background: #d1fae5;
            color: #10b981;
            font-weight: 600;
            border-color: #a7f3d0;
        }

        .quiz-system-all-mcq-reasoning {
            margin-top: 6px;
            font-size: 0.486rem;
            color: var(--text-secondary);
            padding: 6px;
            background: var(--light);
            border-radius: 3px;
            border-left: 2.25px solid var(--vibrant-1);
        }

        /* NEW: MEDPLEX NOTES (Topics Fetcher) Styles */
        .notes-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 9.72px;
            padding-bottom: 6.48px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.3);
        }

        .notes-search {
            display: flex;
            gap: 4.86px;
            margin-bottom: 9.72px;
        }

        .notes-search select {
            flex: 1;
            padding: 4.05px 6.48px;
            border: 1px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            background: var(--light);
            color: var(--text-primary);
            font-size: 0.486rem;
        }

        .notes-content {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 12.15px;
            margin-top: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .topic-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 9.72px;
            padding-bottom: 6.48px;
            border-bottom: 1px dashed rgba(30, 58, 138, 0.3);
        }

        .topic-meta-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .topic-meta-label {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            margin-bottom: 1.62px;
        }

        .topic-meta-value {
            font-size: 0.567rem;
            font-weight: 600;
            color: var(--vibrant-1);
        }

        .theory-section {
            margin-bottom: 12.15px;
            padding: 9.72px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border-left: 3px solid var(--vibrant-1);
        }

        .theory-section h4 {
            font-size: 0.648rem;
            color: var(--vibrant-1);
            margin-bottom: 6.48px;
            display: flex;
            align-items: center;
            gap: 3.24px;
        }

        .theory-section p {
            font-size: 0.486rem;
            line-height: 1.4;
        }

        .key-points-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 6.48px;
            margin: 12.15px 0;
        }

        .key-point-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 6.48px;
            border: 1px solid rgba(30, 58, 138, 0.2);
            display: flex;
            align-items: flex-start;
            gap: 4.86px;
        }

        .key-point-icon {
            color: var(--vibrant-1);
            font-size: 0.729rem;
            margin-top: 1.62px;
        }

        .key-point-text {
            font-size: 0.486rem;
            flex: 1;
        }

        .notes-mcqs {
            margin-top: 12.15px;
        }

        .notes-mcq-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .notes-mcq-question {
            font-weight: 600;
            font-size: 0.567rem;
            margin-bottom: 6.48px;
            color: var(--text-primary);
        }

        .notes-mcq-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3.24px;
            margin-bottom: 9.72px;
        }

        .notes-mcq-option {
            padding: 4.05px 6.48px;
            border: 1px solid var(--vibrant-2);
            border-radius: 3.24px;
            font-size: 0.486rem;
            background: var(--light);
        }

        .notes-mcq-option.correct {
            background: #d1fae5;
            border-color: var(--success);
            color: #065f46;
        }

        .notes-mcq-solution {
            background: #f0f9ff;
            border-radius: 3.24px;
            padding: 9.72px;
            margin-top: 6.48px;
            border-left: 2.43px solid var(--info);
            display: none;
        }

        .notes-mcq-solution.show {
            display: block;
        }

        .solution-section {
            margin-bottom: 6.48px;
        }

        .solution-section h5 {
            font-size: 0.567rem;
            color: var(--vibrant-1);
            margin-bottom: 3.24px;
            display: flex;
            align-items: center;
            gap: 2.43px;
        }

        .solution-section p {
            font-size: 0.486rem;
            line-height: 1.4;
        }

        /* NEW: MEDPLEX PREMIUM QUIZZES Styles */
        .premium-quizzes-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .premium-quizzes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 9.72px;
            padding-bottom: 6.48px;
            border-bottom: 1px solid rgba(30, 58, 138, 0.3);
        }

        .premium-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6.48px;
            margin-bottom: 12.15px;
        }

        .premium-stat-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 9.72px;
            text-align: center;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .premium-stat-value {
            font-size: 0.972rem;
            font-weight: 800;
            color: var(--vibrant-1);
            margin-bottom: 2.43px;
        }

        .premium-stat-label {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            font-weight: 600;
        }

        .premium-quizzes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 9.72px;
            margin-top: 9.72px;
        }

        .premium-quiz-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 12.15px;
            border: 1px solid rgba(30, 58, 138, 0.2);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .premium-quiz-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3.24px 12.15px rgba(30, 58, 138, 0.15);
            border-color: var(--vibrant-1);
        }

        .premium-quiz-id {
            font-weight: 800;
            font-size: 0.648rem;
            color: var(--vibrant-1);
            margin-bottom: 4.86px;
            font-family: monospace;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .premium-quiz-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6.48px;
            font-size: 0.486rem;
            color: var(--vibrant-3);
        }

        .premium-quiz-meta-item {
            display: flex;
            align-items: center;
            gap: 1.62px;
        }

        .premium-quiz-topics {
            background: #f0f9ff;
            border-radius: 3.24px;
            padding: 6.48px;
            margin: 9.72px 0;
            border-left: 2.43px solid var(--vibrant-2);
        }

        .premium-quiz-topics strong {
            font-size: 0.486rem;
            color: var(--vibrant-1);
            display: block;
            margin-bottom: 3.24px;
        }

        .premium-quiz-topics ul {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
        }

        .premium-quiz-topics li {
            font-size: 0.405rem;
            margin-bottom: 1.62px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 2.43px;
        }

        .premium-quiz-action {
            display: flex;
            gap: 4.86px;
        }

        .premium-start-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3.24px;
            padding: 6.48px;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.486rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .premium-start-btn:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
            transform: translateY(-1px);
        }

        /* Pagination Styles */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4.86px;
            margin-top: 12.15px;
            padding-top: 9.72px;
            border-top: 1px solid rgba(30, 58, 138, 0.2);
        }

        .pagination-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 25.92px;
            height: 25.92px;
            border: 1px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            background: var(--card-bg);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.486rem;
        }

        .pagination-btn:hover {
            background: var(--light);
            border-color: var(--vibrant-1);
        }

        .pagination-btn.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border-color: var(--vibrant-1);
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-numbers {
            display: flex;
            gap: 2.43px;
        }

        .page-number {
            min-width: 25.92px;
            height: 25.92px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--vibrant-2);
            border-radius: var(--border-radius);
            background: var(--card-bg);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.486rem;
        }

        .page-number:hover {
            background: var(--light);
            border-color: var(--vibrant-1);
        }

        .page-number.active {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            border-color: var(--vibrant-1);
        }

        /* DMC Results Styles */
        .dmc-container {
            background: linear-gradient(135deg, #f8fafc, #e0f2fe);
            border-radius: var(--border-radius);
            padding: 19.44px;
            margin-bottom: 12.15px;
            border: 2px solid var(--vibrant-1);
            position: relative;
            overflow: hidden;
        }

        .dmc-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="50%" y="50%" font-family="Arial" font-size="8" fill="rgba(30, 58, 138, 0.05)" text-anchor="middle" dominant-baseline="middle">MEDPLEX ACADEMY</text></svg>');
            opacity: 0.3;
            z-index: 1;
        }

        .dmc-header {
            text-align: center;
            margin-bottom: 12.15px;
            position: relative;
            z-index: 2;
        }

        .dmc-header h3 {
            font-size: 0.972rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 3.24px;
        }

        .dmc-seal {
            width: 48.6px;
            height: 48.6px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 9.72px;
            font-size: 1.62rem;
            box-shadow: 0 3.24px 9.72px rgba(30, 58, 138, 0.3);
        }

        .dmc-content {
            position: relative;
            z-index: 2;
        }

        .dmc-statement {
            font-size: 0.567rem;
            line-height: 1.6;
            margin-bottom: 9.72px;
            text-align: justify;
        }

        .dmc-student-info {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            margin-bottom: 9.72px;
            border: 1px solid rgba(30, 58, 138, 0.2);
        }

        .dmc-student-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.486rem;
        }

        .dmc-student-table th, .dmc-student-table td {
            border: 1px solid var(--vibrant-2);
            padding: 4.05px;
            text-align: left;
        }

        .dmc-student-table th {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
            font-weight: 600;
        }

        .dmc-performance {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6.48px;
            margin: 12.15px 0;
        }

        .dmc-performance-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 9.72px;
            text-align: center;
            border-top: 3px solid var(--vibrant-1);
        }

        .dmc-performance-card.correct {
            border-top-color: #10b981;
        }

        .dmc-performance-card.incorrect {
            border-top-color: #ef4444;
        }

        .dmc-performance-card.unanswered {
            border-top-color: #f59e0b;
        }

        .dmc-performance-value {
            font-size: 0.972rem;
            font-weight: 800;
            margin-bottom: 2.43px;
        }

        .dmc-performance-label {
            font-size: 0.405rem;
            color: var(--vibrant-3);
            font-weight: 600;
        }

        .dmc-footer {
            text-align: center;
            margin-top: 12.15px;
            padding-top: 9.72px;
            border-top: 1px dashed rgba(30, 58, 138, 0.3);
            position: relative;
            z-index: 2;
        }

        .dmc-footer p {
            font-size: 0.486rem;
            color: var(--vibrant-3);
            margin-bottom: 3.24px;
        }

        /* Enhanced Reasoning Styles */
        .reasoning-container {
            margin-top: 9.72px;
        }

        .reasoning-correct {
            background: #d1fae5;
            border-radius: 3.24px;
            padding: 9.72px;
            margin-bottom: 6.48px;
            border-left: 2.43px solid var(--success);
        }

        .reasoning-incorrect {
            background: #fef3c7;
            border-radius: 3.24px;
            padding: 9.72px;
            margin-bottom: 6.48px;
            border-left: 2.43px solid var(--warning);
        }

        .reasoning-incorrect-item {
            margin-bottom: 4.86px;
            padding: 4.86px;
            background: #fff7ed;
            border-radius: 2.43px;
            border: 1px solid #fed7aa;
        }

        .reasoning-incorrect-item:last-child {
            margin-bottom: 0;
        }

        .reasoning-incorrect-label {
            font-weight: 600;
            font-size: 0.486rem;
            color: #c2410c;
            margin-bottom: 2.43px;
            display: flex;
            align-items: center;
            gap: 2.43px;
        }

        .reasoning-incorrect-text {
            font-size: 0.486rem;
            color: #7c2d12;
        }

        /* Enhanced Homepage Features */
        .feature-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 9.72px;
            margin: 12.15px 0;
        }

        .feature-highlight-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 12.15px;
            border: 1px solid rgba(30, 58, 138, 0.2);
            transition: var(--transition);
        }

        .feature-highlight-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3.24px 12.15px rgba(30, 58, 138, 0.15);
        }

        .feature-highlight-icon {
            font-size: 1.62rem;
            background: linear-gradient(45deg, var(--vibrant-1), var(--vibrant-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 6.48px;
        }

        .feature-highlight-title {
            font-size: 0.648rem;
            font-weight: 700;
            color: var(--vibrant-1);
            margin-bottom: 4.86px;
        }

        .feature-highlight-description {
            font-size: 0.486rem;
            color: var(--vibrant-3);
            line-height: 1.4;
        }

        /* Enhanced FAQ Styles */
        .enhanced-faq-container {
            margin-top: 12.15px;
        }

        .enhanced-faq-item {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            margin-bottom: 6.48px;
            overflow: hidden;
            border: 1px solid rgba(30, 58, 138, 0.2);
            transition: var(--transition);
        }

        .enhanced-faq-item:hover {
            border-color: var(--vibrant-1);
        }

        .enhanced-faq-question {
            padding: 9.72px;
            background: var(--light);
            font-weight: 600;
            font-size: 0.567rem;
            color: var(--vibrant-1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .enhanced-faq-item.active .enhanced-faq-question {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            color: white;
        }

        .enhanced-faq-answer {
            padding: 9.72px;
            font-size: 0.486rem;
            display: none;
            line-height: 1.4;
        }

        .enhanced-faq-item.active .enhanced-faq-answer {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .grid-3 {
                grid-template-columns: 1fr 1fr;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .form-group.full-width {
                grid-column: span 1;
            }
            .quiz-system-subject-selection-grid {
                grid-template-columns: 1fr;
            }
            .premium-quizzes-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            .feature-highlights {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 900px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            .main-nav {
                flex-direction: column;
                position: absolute;
                top: 100%;
                right: 0;
                background: var(--card-bg);
                border-radius: var(--border-radius);
                box-shadow: var(--shadow);
                padding: 4.86px;
                z-index: 100;
                width: 129.6px;
                display: none;
            }
            
            .main-nav.active {
                display: flex;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: flex-start;
            }

            .dr-hamad-section {
                flex-direction: column;
                text-align: center;
            }

            .bank-subject-buttons {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .premium-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .dmc-performance {
                grid-template-columns: repeat(2, 1fr);
            }

            .key-points-grid {
                grid-template-columns: 1fr;
            }

            .quiz-system-quiz-header {
                flex-direction: column;
                gap: 4.5px;
                align-items: flex-start;
            }
            
            .quiz-system-navigation-buttons {
                grid-template-columns: 1fr;
            }
            
            .quiz-system-timer-container {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 3.75px;
                justify-content: flex-end;
                width: 100%;
            }
            
            .quiz-system-quiz-title-container {
                width: 100%;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 4.05px;
            }
            
            header {
                padding: 4.86px;
            }
            
            .logo h1 {
                font-size: 0.81rem;
            }
            
            .panel {
                padding: 4.86px;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 2.43px;
            }
            
            .panel-actions {
                flex-direction: column;
            }
            
            .welcome-content {
                padding: 9.72px;
                margin: 6.48px;
            }
            
            .welcome-content h2 {
                font-size: 1.053rem;
            }
            
            .welcome-content p {
                font-size: 0.567rem;
            }
            
            .welcome-logo {
                font-size: 1.62rem;
            }

            .contact-form-container {
                padding: 12.15px;
            }

            .premium-quizzes-grid {
                grid-template-columns: 1fr;
            }

            .premium-stats {
                grid-template-columns: 1fr;
            }

            .dmc-performance {
                grid-template-columns: 1fr;
            }

            .feature-highlights {
                grid-template-columns: 1fr;
            }

            .bank-subject-buttons {
                grid-template-columns: 1fr 1fr;
            }

            .learning-question {
                padding: 6.48px;
            }

            .learning-question-text {
                font-size: 0.486rem !important;
            }

            .learning-option {
                font-size: 0.486rem !important;
            }

            .student-info-grid {
                grid-template-columns: 1fr;
            }

            .quiz-system-quick-stats {
                flex-direction: column;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 3.24px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--vibrant-1), var(--vibrant-3));
            border-radius: 1.62px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--vibrant-3), var(--vibrant-5));
        }
    </style>
</head>
<body>
    <!-- Welcome Animation -->
    <div class="welcome-overlay" id="welcome-overlay">
        <div class="welcome-content scale-in">
            <div class="welcome-logo">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h2>Welcome to MedPlex Academy</h2>
            <p>Your gateway to MDCAT excellence. Register now to access all features.</p>
            <button class="btn btn-primary" id="start-btn" style="padding: 4.86px 9.72px; font-size: 0.648rem;">
                Get Started <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Password Modal -->
    <div class="password-modal" id="password-modal">
        <div class="password-content">
            <div class="password-header">
                <h3 class="password-title">Enter Quiz Password</h3>
                <button class="close-modal" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="password-form">
                <div class="form-group">
                    <label for="quiz-password">Password</label>
                    <input type="password" id="quiz-password" placeholder="Enter the Quiz Password">
                    <div class="password-hint">Enter the exact password for this quiz</div>
                    <div class="error-message" id="password-error">Incorrect password. Please try again.</div>
                </div>
                <button class="btn btn-primary" id="submit-password">
                    <i class="fas fa-lock-open"></i> Access Quiz
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <button class="menu-toggle" id="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="logo">
                <h1>MedPlex Academy</h1>
                <p>MDCAT Preparation Portal</p>
            </div>
            
            <div class="header-content">
                <h1>Register to Access All Features</h1>
                <p>Complete registration to access quizzes, study materials, and more</p>
            </div>
        </header>

        <div class="nav-container">
            <div class="nav-header">
                <h2>Navigation</h2>
                <button class="theme-toggle" id="theme-toggle">
                    <span></span>
                </button>
            </div>
            
            <div class="main-nav" id="main-nav">
                <!-- Initial tabs (shown to all) -->
                <button class="nav-btn active" data-tab="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" data-tab="about">
                    <i class="fas fa-info-circle"></i>
                    <span>About Us</span>
                </button>
                <button class="nav-btn" data-tab="contact">
                    <i class="fas fa-envelope"></i>
                    <span>Contact Us</span>
                </button>
                
                <!-- Restricted tabs (shown only after login) -->
                <!-- First Bank Tab: Learning Mode -->
                <button class="nav-btn restricted-tab" data-tab="bank1">
                    <i class="fas fa-book-reader"></i>
                    <span>MCQs Bank (Learning Mode)</span>
                </button>
                
                <!-- NEW: MedPlex Quizzes Tab -->
                <button class="nav-btn restricted-tab" data-tab="quizzes">
                    <i class="fas fa-clipboard-list"></i>
                    <span>MedPlex Quizzes</span>
                </button>

                <!-- NEW: MedPlex Notes Tab -->
                <button class="nav-btn restricted-tab" data-tab="notes">
                    <i class="fas fa-book"></i>
                    <span>MedPlex Notes</span>
                </button>

                <!-- NEW: MedPlex Premium Quizzes Tab -->
                <button class="nav-btn restricted-tab" data-tab="premium-quizzes">
                    <i class="fas fa-crown"></i>
                    <span>MedPlex Premium Quizzes</span>
                </button>
                
                <!-- Logout Button (shown only after login) -->
                <button class="nav-btn restricted-tab" id="logout-btn" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Stats Panel (only shown after login) -->
        <div class="stats-panel" id="stats-panel" style="display: none;">
            <div class="stat-item">
                <div class="stat-value" id="chemistry-quizzes">0</div>
                <div class="stat-label">Chemistry</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="biology-quizzes">0</div>
                <div class="stat-label">Biology</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="physics-quizzes">0</div>
                <div class="stat-label">Physics</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="english-quizzes">0</div>
                <div class="stat-label">English</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="logical-quizzes">0</div>
                <div class="stat-label">Logical Reasoning</div>
            </div>
        </div>

        <!-- Homepage Tab -->
        <div class="tab-content active" id="home-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-home"></i> Homepage</h3>
                </div>
                
                <!-- Authentication Forms (shown when not logged in) -->
                <div id="auth-forms-container">
                    <div class="auth-forms-container">
                        <div class="auth-tabs">
                            <button class="auth-tab-btn active" id="register-tab-btn">Create a MedPlex Account</button>
                            <button class="auth-tab-btn" id="login-tab-btn">Sign In to MedPlex</button>
                        </div>
                        
                        <!-- Registration Form -->
                        <div class="auth-form active" id="register-form">
                            <div class="auth-form-header">
                                <h3>Register for MedPlex Academy</h3>
                                <p>Create your account to access all study materials and quizzes</p>
                            </div>
                            
                            <form id="registration-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="reg-name">Full Name *</label>
                                        <input type="text" id="reg-name" name="name" required placeholder="Enter your full name">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-father-name">Father's Name *</label>
                                        <input type="text" id="reg-father-name" name="father-name" required placeholder="Enter father's name">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-email">Email Address *</label>
                                        <input type="email" id="reg-email" name="email" required placeholder="example@email.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-phone">Mobile Number (WhatsApp) *</label>
                                        <input type="tel" id="reg-phone" name="phone" required placeholder="03XXXXXXXXX">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-secondary-phone">Secondary Phone (Optional)</label>
                                        <input type="tel" id="reg-secondary-phone" name="secondary-phone" placeholder="03XXXXXXXXX">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-province">Province *</label>
                                        <select id="reg-province" name="province" required>
                                            <option value="">Select Province</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Sindh">Sindh</option>
                                            <option value="KPK">Khyber Pakhtunkhwa</option>
                                            <option value="Balochistan">Balochistan</option>
                                            <option value="Gilgit-Baltistan">Gilgit-Baltistan</option>
                                            <option value="AJK">Azad Jammu & Kashmir</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-district">District *</label>
                                        <input type="text" id="reg-district" name="district" required placeholder="Enter your district">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-mdcat-status">MDCAT Status *</label>
                                        <select id="reg-mdcat-status" name="mdcat-status" required>
                                            <option value="">Select Status</option>
                                            <option value="Appearing">Appearing in 2025</option>
                                            <option value="Repeater">Repeater</option>
                                            <option value="First Attempt">First Attempt</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-mdcat-marks">Previous MDCAT Marks (if any)</label>
                                        <input type="number" id="reg-mdcat-marks" name="mdcat-marks" placeholder="Enter marks">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-matric-obtained">Matric Obtained Marks *</label>
                                        <input type="number" id="reg-matric-obtained" name="matric-obtained" required placeholder="Enter obtained marks">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-matric-total">Matric Total Marks *</label>
                                        <input type="number" id="reg-matric-total" name="matric-total" required placeholder="Enter total marks">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-fsc-obtained">FSC Obtained Marks *</label>
                                        <input type="number" id="reg-fsc-obtained" name="fsc-obtained" required placeholder="Enter obtained marks">
                                    </div>
                                    <div class="form-group">
                                        <label for="reg-fsc-total">FSC Total Marks *</label>
                                        <input type="number" id="reg-fsc-total" name="fsc-total" required placeholder="Enter total marks">
                                    </div>
                                </div>
                                
                                <div class="form-note">
                                    * All fields are required except where marked optional
                                </div>
                                
                                <button type="submit" class="auth-submit-btn" id="register-submit-btn">
                                    <i class="fas fa-user-plus"></i> Register Now
                                </button>
                            </form>
                            
                            <div class="auth-message" id="register-message"></div>
                        </div>
                        
                        <!-- Login Form -->
                        <div class="auth-form" id="login-form">
                            <div class="auth-form-header">
                                <h3>Sign In to Your Account</h3>
                                <p>Enter your registration ID and email to access your account</p>
                            </div>
                            
                            <form id="login-form-elements">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="login-reg-id">Registration ID *</label>
                                        <input type="text" id="login-reg-id" name="regId" required placeholder="Enter your registration ID (e.g., MP-1234-2025)">
                                        <div class="form-note">Your registration ID was provided during registration</div>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="login-email">Email Address *</label>
                                        <input type="email" id="login-email" name="email" required placeholder="Enter your registered email">
                                    </div>
                                </div>
                                
                                <button type="submit" class="auth-submit-btn" id="login-submit-btn">
                                    <i class="fas fa-sign-in-alt"></i> Sign In
                                </button>
                            </form>
                            
                            <div class="auth-message" id="login-message"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Student Dashboard (shown after login) -->
                <div class="student-dashboard" id="student-dashboard">
                    <div class="student-welcome">
                        <h3>Welcome back, <span id="student-name">Student</span>!</h3>
                        <p>Ready to continue your MDCAT preparation journey</p>
                    </div>
                    
                    <div class="student-info">
                        <h3 style="margin-bottom: 6.48px; color: var(--vibrant-1); font-size: 0.648rem;">
                            <i class="fas fa-user-circle"></i> Student Information
                        </h3>
                        <div class="student-info-grid" id="student-info-grid">
                            <!-- Student info will be populated here -->
                        </div>
                    </div>
                    
                    <!-- Original homepage content -->
                    <div class="homepage-content">
                        <!-- Dr. Hamad Section -->
                        <div class="dr-hamad-section">
                            <img src="https://i.ibb.co/7d5pVqSS/developer.jpg" alt="Dr. Hamad Ahmad" class="dr-hamad-image">
                            <div class="dr-hamad-info">
                                <div class="dr-hamad-name">Dr. Hamad Ahmad</div>
                                <div class="dr-hamad-title">Head of MedPlex Academy</div>
                                <div class="dr-hamad-description">
                                    Dr. Hamad Ahmad is the visionary leader and founder of MedPlex Academy, a dedicated platform for MDCAT preparation. With years of experience in medical education and a passion for teaching, he has helped thousands of students achieve their dreams of becoming doctors through innovative learning methodologies and comprehensive study materials.
                                </div>
                            </div>
                        </div>
                        
                        <div class="homepage-section">
                            <h3>MedPlex Academy  Your Gateway to MDCAT Excellence</h3>
                            <p>Welcome to MedPlex Academy, Pakistan's premier MDCAT preparation platform designed to transform your medical entrance exam journey. Our academy is built on the foundation of excellence, innovation, and student success. We provide a comprehensive learning ecosystem that combines cutting-edge technology with expert academic guidance.</p>
                            <p>Our platform offers a complete solution for MDCAT preparation, featuring interactive quizzes, detailed study notes, comprehensive mock tests, and personalized performance tracking. Every resource at MedPlex Academy is meticulously crafted by our team of subject matter experts, medical professionals, and education specialists.</p>
                        </div>

                        <!-- Feature Highlights -->
                        <div class="homepage-section">
                            <h3>Why Choose MedPlex Academy?</h3>
                            <div class="feature-highlights">
                                <div class="feature-highlight-card">
                                    <div class="feature-highlight-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="feature-highlight-title">Intelligent Learning System</div>
                                    <div class="feature-highlight-description">
                                        Our adaptive learning system identifies your weak areas and provides personalized study recommendations to maximize your preparation efficiency.
                                    </div>
                                </div>
                                
                                <div class="feature-highlight-card">
                                    <div class="feature-highlight-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="feature-highlight-title">Real-Time Progress Tracking</div>
                                    <div class="feature-highlight-description">
                                        Monitor your improvement with detailed analytics, performance reports, and comparative analysis to stay ahead in your preparation.
                                    </div>
                                </div>
                                
                                <div class="feature-highlight-card">
                                    <div class="feature-highlight-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="feature-highlight-title">Expert Faculty Support</div>
                                    <div class="feature-highlight-description">
                                        Get guidance from experienced medical professionals and educators who understand the MDCAT pattern and requirements thoroughly.
                                    </div>
                                </div>
                                
                                <div class="feature-highlight-card">
                                    <div class="feature-highlight-icon">
                                        <i class="fas fa-mobile-alt"></i>
                                    </div>
                                    <div class="feature-highlight-title">Mobile-Optimized Platform</div>
                                    <div class="feature-highlight-description">
                                        Study anytime, anywhere with our fully responsive platform that works seamlessly across all devices - desktop, tablet, and mobile.
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="homepage-section">
                            <h3>MDCAT 2025 Syllabus Details</h3>
                            <p>The MDCAT 2025 examination consists of 180 multiple-choice questions distributed across different subjects as follows:</p>
                            
                            <table class="syllabus-table">
                                <thead>
                                    <tr>
                                        <th>Subject</th>
                                        <th>Number of Questions</th>
                                        <th>Weightage</th>
                                        <th>Time Allocation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><i class="fas fa-dna"></i> Biology</td>
                                        <td>81 MCQs</td>
                                        <td>45%</td>
                                        <td>81 minutes</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-flask"></i> Chemistry</td>
                                        <td>45 MCQs</td>
                                        <td>25%</td>
                                        <td>45 minutes</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-atom"></i> Physics</td>
                                        <td>36 MCQs</td>
                                        <td>20%</td>
                                        <td>36 minutes</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-language"></i> English</td>
                                        <td>9 MCQs</td>
                                        <td>5%</td>
                                        <td>9 minutes</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-brain"></i> Logical Reasoning</td>
                                        <td>9 MCQs</td>
                                        <td>5%</td>
                                        <td>9 minutes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="homepage-section">
                            <h3>Our Comprehensive Study Materials</h3>
                            <p>We provide a wide range of educational resources to help you prepare effectively for the MDCAT. Each service is designed with specific learning objectives and benefits:</p>
                            
                            <div class="about-features">
                                <div class="feature-card">
                                    <div class="feature-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="feature-title">Weekly Test Series</div>
                                    <div class="feature-description">Regular assessments designed to track your progress systematically and identify areas for improvement with detailed performance analytics.</div>
                                </div>
                                
                                <div class="feature-card">
                                    <div class="feature-icon">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    <div class="feature-title">Comprehensive Study Notes</div>
                                    <div class="feature-description">Detailed subject-wise notes covering the entire syllabus with simplified explanations, diagrams, and memory aids for better retention.</div>
                                </div>
                                
                                <div class="feature-card">
                                    <div class="feature-icon">
                                        <i class="fas fa-clipboard-check"></i>
                                    </div>
                                    <div class="feature-title">Monthly Assessment Tests</div>
                                    <div class="feature-description">Full-length mock tests to simulate the actual exam environment and build stamina, with real-time scoring and ranking.</div>
                                </div>
                                
                                <div class="feature-card">
                                    <div class="feature-icon">
                                        <i class="fas fa-graduation-cap"></i>
                                    </div>
                                    <div class="feature-title">Full Syllabus Mock Tests</div>
                                    <div class="feature-description">Complete practice tests covering all subjects to evaluate overall preparation with detailed solutions and performance insights.</div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced FAQ Section -->
                        <div class="homepage-section">
                            <h3>Frequently Asked Questions (FAQs)</h3>
                            
                            <div class="enhanced-faq-container">
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How can I access the premium quizzes?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        All our premium quizzes are accessible through the "MedPlex Premium Quizzes" tab after login. You need to complete your registration and login to access these quizzes. Each quiz is carefully curated by our expert faculty.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        What subjects are covered in your study materials?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        We cover all MDCAT subjects comprehensively: Biology, Chemistry, Physics, English, and Logical Reasoning. Each subject includes chapter-wise study notes, practice questions, and full-length tests.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How frequently are the quizzes updated?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        We update our question bank weekly with new questions based on the latest MDCAT patterns. Our team continuously monitors exam trends and updates content accordingly.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Is there any mobile app available?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Currently, we offer a fully responsive web platform that works perfectly on all mobile devices. You can access all features through your mobile browser with the same functionality.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How can I track my progress?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Your dashboard provides comprehensive progress tracking including subject-wise performance, time management statistics, improvement trends, and comparative analysis with other students.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Are the mock tests timed?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Yes, all our mock tests are timed to simulate the actual exam conditions. You can practice with varying time limits to improve your speed and accuracy.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Can I download study materials?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Study notes and some resources are available for download in PDF format. However, interactive quizzes and tests must be taken online through our platform.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How do I reset my password?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Use the "Forgot Password" link on the login page. You'll receive password reset instructions on your registered email address within minutes.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Are there any discounts available?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        We offer special discounts for early registration, group enrollments, and scholarship programs. Contact our support team for current offers.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How can I contact support?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Use the Contact Us form on our website, email us at support@medplex.com, or call our helpline during business hours for immediate assistance.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Do you provide solutions for practice questions?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Yes, every practice question includes detailed solutions with step-by-step explanations, alternative methods, and common mistakes to avoid.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Is the content updated for MDCAT 2025?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Absolutely! All our content is regularly updated to match the latest MDCAT 2025 syllabus, pattern, and examination trends.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        Can I access on multiple devices?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Yes, you can access your account from multiple devices. However, for security reasons, simultaneous login from multiple devices is not allowed.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        How are the quizzes structured?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Quizzes are structured by subject, topic, and difficulty level. Each quiz includes a mix of conceptual, analytical, and application-based questions.
                                    </div>
                                </div>
                                
                                <div class="enhanced-faq-item">
                                    <div class="enhanced-faq-question">
                                        What makes MedPlex different from other platforms?
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="enhanced-faq-answer">
                                        Our unique selling points include: expert-created content, adaptive learning technology, comprehensive performance analytics, 24/7 support, and proven success track record.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- About Us Tab -->
        <div class="tab-content" id="about-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-info-circle"></i> About Us</h3>
                </div>
                
                <div class="homepage-content">
                    <div class="homepage-section">
                        <h3>About Us  MedPlex Academy</h3>
                        <p>MedPlex Academy represents a revolutionary approach to MDCAT preparation in Pakistan. Founded on the principles of excellence, innovation, and student success, we have established ourselves as a leading force in medical entrance exam preparation. Our journey began with a simple vision: to create a platform that would democratize quality medical education and make premium preparation resources accessible to every aspiring medical student across Pakistan.</p>
                        <p>Unlike traditional coaching centers, MedPlex Academy leverages cutting-edge technology to deliver personalized learning experiences. Our platform combines the expertise of seasoned medical educators with artificial intelligence to create adaptive learning paths that cater to individual student needs. This innovative approach ensures that every student receives tailored guidance and resources to maximize their potential.</p>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Our Vision</h3>
                        <p>Our vision is to become the most trusted and effective MDCAT preparation platform in Pakistan, recognized for transforming ordinary students into extraordinary medical professionals. We envision a future where every aspiring doctor, regardless of their geographical location or economic background, has access to world-class preparation resources that empower them to achieve their dreams.</p>
                        <p>We aim to bridge the gap between traditional education and modern technological solutions, creating a learning ecosystem that is both effective and engaging. Our vision extends beyond exam preparation - we aim to nurture critical thinking, problem-solving skills, and a lifelong love for learning in every student we serve.</p>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Our Mission</h3>
                        <p>Our mission is threefold: to provide comprehensive, high-quality preparation materials; to offer personalized learning experiences through technology; and to support students throughout their MDCAT journey with expert guidance and mentorship. We are committed to:</p>
                        <ul class="services-list">
                            <li><i class="fas fa-check-circle"></i> Creating content that aligns perfectly with the latest MDCAT patterns and requirements</li>
                            <li><i class="fas fa-check-circle"></i> Developing innovative learning tools that adapt to individual learning styles</li>
                            <li><i class="fas fa-check-circle"></i> Building a supportive community where students can learn from each other</li>
                            <li><i class="fas fa-check-circle"></i> Providing transparent progress tracking and performance analytics</li>
                            <li><i class="fas fa-check-circle"></i> Maintaining the highest standards of academic excellence and integrity</li>
                        </ul>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>What Makes MedPlex Academy Unique</h3>
                        <p>MedPlex Academy stands apart through our commitment to quality, innovation, and student success. Our unique approach includes:</p>
                        
                        <div class="feature-highlights">
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="feature-highlight-title">Expert-Created Content</div>
                                <div class="feature-highlight-description">
                                    All our study materials are created by medical professionals and experienced educators who understand the MDCAT examination inside out.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="feature-highlight-title">AI-Powered Learning</div>
                                <div class="feature-highlight-description">
                                    Our intelligent platform adapts to your learning pace, identifies weak areas, and provides targeted practice to ensure maximum improvement.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <div class="feature-highlight-title">Comprehensive Analytics</div>
                                <div class="feature-highlight-description">
                                    Detailed performance reports, comparative analysis, and improvement tracking help you stay on the right path to success.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-headset"></i>
                                </div>
                                <div class="feature-highlight-title">24/7 Support</div>
                                <div class="feature-highlight-description">
                                    Round-the-clock academic support ensures that help is always available when you need it most.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Our Team</h3>
                        <p>The MedPlex team is our greatest strength. We bring together passionate educators, medical professionals, technology experts, and student success specialists who work collaboratively to create the best possible learning experience. Our team includes:</p>
                        
                        <div class="feature-highlights">
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div class="feature-highlight-title">Medical Experts</div>
                                <div class="feature-highlight-description">
                                    Practicing doctors and medical faculty who ensure our content is accurate, relevant, and up-to-date with current medical education standards.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="feature-highlight-title">Education Specialists</div>
                                <div class="feature-highlight-description">
                                    Experienced educators with decades of combined experience in preparing students for competitive medical entrance examinations.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div class="feature-highlight-title">Technology Team</div>
                                <div class="feature-highlight-description">
                                    Skilled developers and designers who create innovative learning tools and maintain our cutting-edge platform.
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-hands-helping"></i>
                                </div>
                                <div class="feature-highlight-title">Student Support</div>
                                <div class="feature-highlight-description">
                                    Dedicated support staff who provide guidance, motivation, and assistance to ensure every student's success.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Our Impact</h3>
                        <p>Since our inception, MedPlex Academy has helped thousands of students achieve their dream of securing admissions in prestigious medical colleges across Pakistan. Our success stories include:</p>
                        <ul class="services-list">
                            <li><i class="fas fa-trophy"></i> Students who have secured top ranks in MDCAT examinations</li>
                            <li><i class="fas fa-university"></i> Successful admissions to leading medical universities</li>
                            <li><i class="fas fa-chart-line"></i> Consistent improvement in student performance metrics</li>
                            <li><i class="fas fa-users"></i> Growing community of successful medical professionals</li>
                            <li><i class="fas fa-award"></i> Recognition as a trusted name in medical education</li>
                        </ul>
                        <p>We measure our success not just by the number of students we serve, but by the quality of education we provide and the dreams we help realize. Every student's success story is a testament to our commitment to excellence.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Us Tab -->
        <div class="tab-content" id="contact-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-envelope"></i> Contact Us</h3>
                </div>
                
                <div class="homepage-content">
                    <div class="contact-team">
                        <div class="team-head">
                            <img src="https://i.ibb.co/7d5pVqSS/developer.jpg" alt="Dr. Hamad Ahmad" class="head-image">
                            <div class="head-name">Dr. Hamad Ahmad</div>
                            <div class="head-title">Head of MedPlex Academy</div>
                        </div>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Get in Touch With Us</h3>
                        <p>We're here to help you with your MDCAT preparation journey. Whether you have questions about our courses, need technical assistance, or want to provide feedback, our team is ready to assist you. Fill out the form below and we'll respond as quickly as possible.</p>
                        <p>At MedPlex Academy, we believe in building strong relationships with our students. Your success is our priority, and we're committed to providing you with the support you need to achieve your medical career goals.</p>
                    </div>
                    
                    <!-- Contact Form -->
                    <div class="contact-form-container">
                        <div class="contact-header">
                            <h2>Contact MedPlex Academy</h2>
                            <p>Send your query and we will respond within 24 hours</p>
                        </div>

                        <form id="contactForm">
                            <div class="contact-form-group">
                                <label><i class="fas fa-user"></i> Full Name</label>
                                <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                            </div>

                            <div class="contact-form-group">
                                <label><i class="fas fa-envelope"></i> Email Address</label>
                                <input type="email" id="email" name="email" placeholder="example@mail.com" required>
                            </div>

                            <div class="contact-form-group">
                                <label><i class="fas fa-phone"></i> Phone Number</label>
                                <input type="tel" id="phone" name="phone" placeholder="e.g. 03XXXXXXXXX" required>
                            </div>

                            <div class="contact-form-group">
                                <label><i class="fas fa-city"></i> District</label>
                                <input type="text" id="district" name="district" placeholder="Your City/District" required>
                            </div>

                            <div class="contact-form-group">
                                <label><i class="fas fa-question-circle"></i> Your Query</label>
                                <textarea id="message" name="message" placeholder="How can we help you? Please provide details about your inquiry..." required></textarea>
                            </div>

                            <button type="submit" class="contact-submit-btn" id="contact-submit-btn">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                        </form>

                        <div id="contact-status-message"></div>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Other Ways to Reach Us</h3>
                        <div class="feature-highlights">
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-envelope-open-text"></i>
                                </div>
                                <div class="feature-highlight-title">Email Support</div>
                                <div class="feature-highlight-description">
                                    <strong>General Inquiries:</strong> info@medplex.com<br>
                                    <strong>Technical Support:</strong> support@medplex.com<br>
                                    <strong>Academic Questions:</strong> academics@medplex.com
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="feature-highlight-title">Office Hours</div>
                                <div class="feature-highlight-description">
                                    <strong>Monday - Friday:</strong> 9:00 AM - 6:00 PM<br>
                                    <strong>Saturday:</strong> 10:00 AM - 4:00 PM<br>
                                    <strong>Sunday:</strong> Closed
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="feature-highlight-title">Office Address</div>
                                <div class="feature-highlight-description">
                                    MedPlex Academy Headquarters<br>
                                    Education Complex, Phase 5<br>
                                    DHA, Karachi, Pakistan<br>
                                    Postal Code: 75500
                                </div>
                            </div>
                            
                            <div class="feature-highlight-card">
                                <div class="feature-highlight-icon">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div class="feature-highlight-title">Live Chat Support</div>
                                <div class="feature-highlight-description">
                                    Available during office hours<br>
                                    Click the chat icon in the bottom right corner<br>
                                    Instant responses to your queries<br>
                                    Technical and academic support
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="homepage-section">
                        <h3>Frequently Asked Contact Questions</h3>
                        
                        <div class="enhanced-faq-container">
                            <div class="enhanced-faq-item">
                                <div class="enhanced-faq-question">
                                    What is the typical response time for inquiries?
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="enhanced-faq-answer">
                                    We strive to respond to all inquiries within 24 hours during business days. For urgent matters, please call our helpline for immediate assistance.
                                </div>
                            </div>
                            
                            <div class="enhanced-faq-item">
                                <div class="enhanced-faq-question">
                                    Can I schedule a one-on-one consultation?
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="enhanced-faq-answer">
                                    Yes, we offer personalized consultations with our academic advisors. Please mention your request in the message field, and we'll arrange a suitable time.
                                </div>
                            </div>
                            
                            <div class="enhanced-faq-item">
                                <div class="enhanced-faq-question">
                                    Do you provide demo classes?
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="enhanced-faq-answer">
                                    Absolutely! We offer free demo access to selected study materials and quizzes. Contact us to arrange a demo session tailored to your needs.
                                </div>
                            </div>
                            
                            <div class="enhanced-faq-item">
                                <div class="enhanced-faq-question">
                                    How can I provide feedback about the platform?
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="enhanced-faq-answer">
                                    We welcome your feedback! Use the contact form or email us directly. Your suggestions help us improve our services for all students.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BANK 1: MCQs Bank (Learning Mode) Tab (Restricted) -->
        <div class="tab-content" id="bank1-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-book-reader"></i> MCQs Bank (Learning Mode)</h3>
                    <div class="panel-actions">
                        <div id="bank1-pagination-info" style="font-size: 0.486rem; color: var(--vibrant-3);">
                            Page <span id="current-page">1</span> of <span id="total-pages">1</span>
                        </div>
                        <button class="btn btn-primary" id="refresh-bank1">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <div class="homepage-section">
                    <h3>Learn MCQs by Subject</h3>
                    <p>Select a subject to view and learn from the available MCQs. Study with colorful explanations and detailed reasoning. Each page shows 20 MCQs for focused learning.</p>
                </div>
                
                <div class="bank-container">
                    <div class="bank-subject-buttons">
                        <button class="subject-btn active" data-subject="All">
                            <i class="fas fa-globe"></i> All Subjects
                        </button>
                        <button class="subject-btn" data-subject="Biology">
                            <i class="fas fa-dna"></i> Biology
                        </button>
                        <button class="subject-btn" data-subject="Chemistry">
                            <i class="fas fa-flask"></i> Chemistry
                        </button>
                        <button class="subject-btn" data-subject="Physics">
                            <i class="fas fa-atom"></i> Physics
                        </button>
                        <button class="subject-btn" data-subject="English">
                            <i class="fas fa-language"></i> English
                        </button>
                        <button class="subject-btn" data-subject="Logical Reasoning">
                            <i class="fas fa-brain"></i> Logical Reasoning
                        </button>
                    </div>
                    
                    <div id="bank1-loader" class="bank-loader" style="display: none;">
                        <div class="loading-spinner"></div>
                        <p style="margin-top: 6.48px; font-size: 0.486rem;">Fetching MCQs for learning...</p>
                    </div>
                    
                    <div id="bank1-content">
                        <div class="bank-no-data">
                            <i class="fas fa-book-reader fa-2x" style="margin-bottom: 6.48px; color: var(--vibrant-3);"></i>
                            <p>Select a subject to view MCQs for learning</p>
                            <p style="font-size: 0.405rem; margin-top: 3.24px;">MCQs will be automatically loaded when you select a subject</p>
                        </div>
                    </div>
                    
                    <div class="pagination" id="bank1-pagination" style="display: none;">
                        <button class="pagination-btn" id="first-page" title="First Page">
                            <i class="fas fa-angle-double-left"></i>
                        </button>
                        <button class="pagination-btn" id="prev-page" title="Previous Page">
                            <i class="fas fa-angle-left"></i>
                        </button>
                        <div class="page-numbers" id="page-numbers">
                            <!-- Page numbers will be inserted here -->
                        </div>
                        <button class="pagination-btn" id="next-page" title="Next Page">
                            <i class="fas fa-angle-right"></i>
                        </button>
                        <button class="pagination-btn" id="last-page" title="Last Page">
                            <i class="fas fa-angle-double-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: MEDPLEX QUIZZES TAB (Restricted) -->
        <div class="tab-content" id="quizzes-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-clipboard-list"></i> MedPlex Quizzes</h3>
                </div>
                
                <div class="quiz-system-container">
                    <!-- Quiz System Status Messages -->
                    <div class="quiz-system-status-msg" id="quiz-system-status-msg"></div>
                    
                    <!-- Quiz Notification -->
                    <div class="quiz-system-quiz-notification" id="quiz-system-quiz-notification">
                        <div class="quiz-system-quiz-notification-content">
                            <div class="quiz-system-quiz-notification-title" id="quiz-system-notification-title">Quiz Progress Found</div>
                            <div class="quiz-system-quiz-notification-message" id="quiz-system-notification-message">You have an unfinished quiz. Do you want to continue where you left off?</div>
                            <div class="quiz-system-quiz-notification-actions">
                                <button class="quiz-system-quiz-notification-btn secondary" id="quiz-system-notification-no">Start Fresh</button>
                                <button class="quiz-system-quiz-notification-btn primary" id="quiz-system-notification-yes">Continue</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Signin Page -->
                    <div id="quiz-system-signin-page" class="quiz-system-page active">
                        <h2><i class="fas fa-lock"></i> Access Test</h2>
                        <p>Sign in or use your access code</p>
                        
                        <div class="quiz-system-main-page-buttons">
                            <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.showQuizAccessForm()">
                                <i class="fas fa-key"></i>
                                <span>Sign In with Quiz Access Code</span>
                            </button>
                            <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.showRegistrationPage()">
                                <i class="fas fa-user-plus"></i>
                                <span>Sign Up to Get Quiz Access</span>
                            </button>
                        </div>
                        
                        <!-- Quiz Access Form -->
                        <div id="quiz-system-quiz-access-form" class="quiz-system-quiz-access-section">
                            <h3><i class="fas fa-key"></i> Enter Quiz Access Code</h3>
                            <div class="quiz-system-password-container quiz-system-input-container">
                                <input type="password" id="quiz-system-quizAccessCode" class="quiz-system-form-input" placeholder="Enter your 12-Digit Quiz Access Code here">
                                <i class="fas fa-eye-slash quiz-system-input-icon" id="quiz-system-toggleQuizAccessCode"></i>
                            </div>
                            <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.accessQuiz(document.getElementById('quiz-system-quizAccessCode').value)">
                                <span>Access Quiz</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <div id="quiz-system-quiz-error-box" class="quiz-system-error-box">
                                <i class="fas fa-exclamation-circle"></i> Invalid quiz access code.
                            </div>
                        </div>
                    </div>

                    <!-- Registration Page -->
                    <div id="quiz-system-registration-page" class="quiz-system-page">
                        <h2><i class="fas fa-user-edit"></i> Student Registration</h2>
                        <p>Please provide your details to register</p>
                        
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-user"></i> Student Name</label>
                            <input type="text" id="quiz-system-studentName" class="quiz-system-form-input" placeholder="Enter your full name">
                        </div>
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-user-friends"></i> Father Name</label>
                            <input type="text" id="quiz-system-fatherName" class="quiz-system-form-input" placeholder="Enter your father's name">
                        </div>
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-envelope"></i> Email Address</label>
                            <input type="email" id="quiz-system-email" class="quiz-system-form-input" placeholder="Enter your email address">
                        </div>
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-phone"></i> Mobile Number (WhatsApp)</label>
                            <input type="tel" id="quiz-system-mobile" class="quiz-system-form-input" placeholder="+92XXXXXXXXXX">
                        </div>
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-city"></i> City / District</label>
                            <input type="text" id="quiz-system-city" class="quiz-system-form-input" placeholder="Enter your city/district">
                        </div>
                        <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.handleRegistration()">
                            <span>Submit to Get Access to Quiz</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="quiz-system-btn quiz-system-btn-red" style="margin-top: 3.75px;" onclick="quizSystem.showPage('quiz-system-signin-page')">
                            <i class="fas fa-chevron-left"></i> Back to Home
                        </button>
                    </div>

                    <!-- Quiz Selection Page -->
                    <div id="quiz-system-quiz-selection-page" class="quiz-system-page">
                        <h2><i class="fas fa-clipboard-list"></i> Quiz Selection</h2>
                        <p>Select your preferred test type and subjects</p>
                        
                        <div class="quiz-system-quiz-type-selector">
                            <h3>Select Test Type</h3>
                            <select id="quiz-system-quiz-type-select" class="quiz-system-form-select" onchange="quizSystem.updateSubjectSelection()">
                                <option value="Full Syllabus">Full Syllabus Test (180 MCQs)</option>
                                <option value="Biology">Biology Only (81 MCQs)</option>
                                <option value="Chemistry">Chemistry Only (45 MCQs)</option>
                                <option value="Physics">Physics Only (36 MCQs)</option>
                                <option value="English">English Only (30 MCQs)</option>
                                <option value="Logical Reasoning">Logical Reasoning Only (30 MCQs)</option>
                            </select>
                            
                            <div class="quiz-system-mcq-count-display" id="quiz-system-mcq-count-display">
                                <strong>Selected:</strong> Full Syllabus - 180 MCQs (81 Biology, 45 Chemistry, 36 Physics, 9 English, 9 Logical Reasoning)
                            </div>
                        </div>
                        
                        <div class="quiz-system-form-group">
                            <label class="quiz-system-form-label"><i class="fas fa-clock"></i> Time Per MCQ (Seconds)</label>
                            <select id="quiz-system-time-per-mcq" class="quiz-system-form-select">
                                <option value="60">60 Seconds</option>
                                <option value="45">45 Seconds</option>
                                <option value="30">30 Seconds</option>
                                <option value="90">90 Seconds</option>
                            </select>
                        </div>
                        
                        <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.startSelectedQuiz()">
                            <i class="fas fa-play-circle"></i>
                            <span>Start Selected Quiz</span>
                        </button>
                        
                        <button class="quiz-system-btn quiz-system-btn-red" style="margin-top: 4.5px;" onclick="quizSystem.showPage('quiz-system-signin-page')">
                            <i class="fas fa-chevron-left"></i> Back to Home
                        </button>
                    </div>

                    <!-- Quiz Page -->
                    <div id="quiz-system-quiz-page" class="quiz-system-page">
                        <div class="quiz-system-quiz-header">
                            <div class="quiz-system-quiz-title-container">
                                <h2 id="quiz-system-quiz-title"></h2>
                                <div class="quiz-system-quiz-info">
                                    <span><i class="fas fa-book"></i> Subject: <span id="quiz-system-quiz-subject">Loading...</span></span>
                                    <span><i class="fas fa-clock"></i> Per MCQ: <span id="quiz-system-per-mcq-time">1</span> Minute</span>
                                </div>
                            </div>
                        </div>
                        <div class="quiz-system-timer-container">
                            <div class="quiz-system-timer" id="quiz-system-question-timer">60</div>
                            <div class="quiz-system-timer total-timer" id="quiz-system-timer">00:00</div>
                        </div>

                        <div class="quiz-system-progress-container">
                            <div class="quiz-system-progress-bar" id="quiz-system-quiz-progress"></div>
                        </div>

                        <div class="quiz-system-question-nav" id="quiz-system-question-nav"></div>
                        
                        <div class="quiz-system-question-container">
                            <div class="quiz-system-question-text" id="quiz-system-question-text"></div>
                            <div class="quiz-system-options-container" id="quiz-system-options-container"></div>
                            <div class="quiz-system-reasoning" id="quiz-system-reasoning">
                                <div class="quiz-system-reasoning-title"><i class="fas fa-lightbulb"></i> Explanation:</div>
                                <div id="quiz-system-reasoning-text"></div>
                            </div>
                        </div>
                        
                        <div class="quiz-system-navigation-buttons">
                            <button class="quiz-system-nav-btn quiz-system-btn-back" onclick="quizSystem.navigateQuestion('prev')">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button class="quiz-system-nav-btn quiz-system-btn-next" onclick="quizSystem.navigateQuestion('next')">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                            <button class="quiz-system-nav-btn quiz-system-btn-reasoning disabled" id="quiz-system-reasoning-btn" onclick="quizSystem.toggleReasoning()">
                                <i class="fas fa-lightbulb"></i> Reasoning
                            </button>
                            <button class="quiz-system-nav-btn quiz-system-btn-submit" onclick="quizSystem.submitTest()">
                                Submit <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Results Page -->
                    <div id="quiz-system-results-page" class="quiz-system-page">
                        <div class="dmc-container">
                            <div class="dmc-header">
                                <div class="dmc-seal">
                                    <i class="fas fa-award"></i>
                                </div>
                                <h3>MEDPLEX MDCAT ACADEMY</h3>
                                <p style="font-size: 0.486rem; color: var(--vibrant-3);">Detailed Marks Certificate (DMC)</p>
                            </div>
                            
                            <div class="dmc-content">
                                <div class="dmc-statement">
                                    <p>This is to certify that <strong><span id="dmc-student-name">[Student Name]</span></strong> s/o <strong><span id="dmc-father-name">[Father Name]</span></strong> has successfully completed the <strong><span id="dmc-quiz-type">[Quiz Type]</span></strong> test conducted by MedPlex MDCAT Preparation Academy.</p>
                                    
                                    <p>The candidate has demonstrated commendable performance in the assessment, showing proficiency in various aspects of the MDCAT syllabus. The detailed performance metrics are presented below for comprehensive evaluation.</p>
                                    
                                    <p style="text-align: center; font-style: italic; margin: 6.48px 0;">
                                        "Success in medicine begins with determination, continues with preparation, and is achieved through examination."
                                    </p>
                                </div>
                                
                                <div class="dmc-student-info">
                                    <table class="dmc-student-table">
                                        <thead>
                                            <tr>
                                                <th>Particular</th>
                                                <th>Details</th>
                                            </tr>
                                        </thead>
                                        <tbody id="dmc-student-details">
                                            <!-- Student details will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="dmc-performance">
                                    <div class="dmc-performance-card correct">
                                        <div class="dmc-performance-value" id="dmc-correct">0</div>
                                        <div class="dmc-performance-label">Correct Answers</div>
                                    </div>
                                    <div class="dmc-performance-card incorrect">
                                        <div class="dmc-performance-value" id="dmc-incorrect">0</div>
                                        <div class="dmc-performance-label">Incorrect Answers</div>
                                    </div>
                                    <div class="dmc-performance-card unanswered">
                                        <div class="dmc-performance-value" id="dmc-unanswered">0</div>
                                        <div class="dmc-performance-label">Unanswered</div>
                                    </div>
                                    <div class="dmc-performance-card">
                                        <div class="dmc-performance-value" id="dmc-score">0/0</div>
                                        <div class="dmc-performance-label">Total Score</div>
                                    </div>
                                </div>
                                
                                <div class="dmc-statement">
                                    <p><strong>Performance Analysis:</strong> The candidate has shown <span id="dmc-performance-level">good</span> understanding of the subject matter. Areas of strength and improvement have been identified through this assessment.</p>
                                    
                                    <p><strong>Recommendations:</strong> Based on the performance analysis, we recommend focused practice in identified weak areas and continued reinforcement of strong concepts to achieve optimal results in the actual MDCAT examination.</p>
                                </div>
                            </div>
                            
                            <div class="dmc-footer">
                                <p><strong>Issued By:</strong> MedPlex MDCAT Preparation Academy</p>
                                <p><strong>Date of Issue:</strong> <span id="dmc-issue-date">[Current Date]</span></p>
                                <p style="font-size: 0.405rem; color: var(--vibrant-3); margin-top: 6.48px;">
                                    <i>This certificate is issued electronically and is valid for reference purposes.</i>
                                </p>
                            </div>
                        </div>
                        
                        <div class="result-actions" id="quiz-system-result-actions">
                            <button class="btn btn-primary" onclick="quizSystem.restartTest()" id="quiz-system-retake-full-btn">
                                <i class="fas fa-redo"></i> Retake Full Test
                            </button>
                            <button class="btn btn-primary" onclick="quizSystem.retakeIncorrect()" id="quiz-system-retake-incorrect-btn">
                                <i class="fas fa-bolt"></i> Retake Incorrect Questions
                            </button>
                            <button class="btn btn-primary" onclick="quizSystem.viewAllMcqs()">
                                <i class="fas fa-clipboard-list"></i> View All MCQs
                            </button>
                        </div>
                    </div>

                    <!-- All MCQs Page -->
                    <div id="quiz-system-all-mcqs-page" class="quiz-system-page">
                        <h2><i class="fas fa-list-alt"></i> All MCQs and Solutions</h2>
                        <div class="quiz-system-all-mcqs-list" id="quiz-system-all-mcqs-list"></div>
                        <button class="quiz-system-btn quiz-system-btn-primary" onclick="quizSystem.showPage('quiz-system-results-page')">
                            <i class="fas fa-arrow-left"></i> Back to Results
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: MEDPLEX NOTES TAB (Restricted) -->
        <div class="tab-content" id="notes-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-book"></i> MedPlex Notes</h3>
                    <div class="panel-actions">
                        <button class="btn btn-primary" id="refresh-notes">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <div class="homepage-section">
                    <h3>Comprehensive Study Notes</h3>
                    <p>Access detailed study materials, key points, and practice questions for all MDCAT subjects. Select a topic to view comprehensive notes.</p>
                </div>
                
                <div class="notes-container">
                    <div class="notes-search">
                        <select id="notes-topic-select" style="flex: 1;">
                            <option value="">Select a topic to view notes...</option>
                        </select>
                        <button class="btn btn-primary" id="load-notes-btn">
                            <i class="fas fa-book-open"></i> Load Notes
                        </button>
                    </div>
                    
                    <div id="notes-loader" style="display: none; text-align: center; padding: 19.44px;">
                        <div class="loading-spinner" style="margin: 0 auto;"></div>
                        <p style="margin-top: 9.72px; font-size: 0.486rem; color: var(--vibrant-3);">Loading study notes...</p>
                    </div>
                    
                    <div id="notes-content" class="notes-content" style="display: none;">
                        <div class="topic-meta">
                            <div class="topic-meta-item">
                                <div class="topic-meta-label">Book</div>
                                <div class="topic-meta-value" id="notes-book">-</div>
                            </div>
                            <div class="topic-meta-item">
                                <div class="topic-meta-label">Main Topic</div>
                                <div class="topic-meta-value" id="notes-topic">-</div>
                            </div>
                            <div class="topic-meta-item">
                                <div class="topic-meta-label">MCQs Available</div>
                                <div class="topic-meta-value" id="notes-mcq-count">0</div>
                            </div>
                            <div class="topic-meta-item">
                                <div class="topic-meta-label">Key Points</div>
                                <div class="topic-meta-value" id="notes-keypoints-count">0</div>
                            </div>
                        </div>
                        
                        <div class="theory-section">
                            <h4><i class="fas fa-book"></i> Textbook Theory</h4>
                            <p id="notes-theory">Loading theory content...</p>
                        </div>
                        
                        <div class="theory-section">
                            <h4><i class="fas fa-lightbulb"></i> Detailed Explanation</h4>
                            <p id="notes-explanation">Loading explanation...</p>
                        </div>
                        
                        <div class="theory-section" id="notes-exceptions-section" style="display: none;">
                            <h4><i class="fas fa-exclamation-triangle"></i> Exceptional Cases</h4>
                            <p id="notes-exceptions"></p>
                        </div>
                        
                        <div id="notes-keypoints-section" style="display: none;">
                            <h4 style="font-size: 0.648rem; color: var(--vibrant-1); margin: 12.15px 0 6.48px 0;">
                                <i class="fas fa-key"></i> Key Points
                            </h4>
                            <div class="key-points-grid" id="notes-keypoints">
                                <!-- Key points will be inserted here -->
                            </div>
                        </div>
                        
                        <div id="notes-mcqs-section" style="display: none;">
                            <h4 style="font-size: 0.648rem; color: var(--vibrant-1); margin: 12.15px 0 6.48px 0;">
                                <i class="fas fa-question-circle"></i> Practice MCQs
                            </h4>
                            <div class="notes-mcqs" id="notes-mcqs-list">
                                <!-- MCQs will be inserted here -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="notes-empty" style="text-align: center; padding: 19.44px; color: var(--vibrant-3);">
                        <i class="fas fa-book-open fa-2x" style="margin-bottom: 9.72px;"></i>
                        <p>Select a topic from the dropdown to view detailed study notes</p>
                        <p style="font-size: 0.405rem; margin-top: 3.24px;">Notes include theory, explanations, key points, and practice questions</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: MEDPLEX PREMIUM QUIZZES TAB (Restricted) -->
        <div class="tab-content" id="premium-quizzes-tab">
            <div class="panel fade-in">
                <div class="panel-header">
                    <h3 class="panel-title"><i class="fas fa-crown"></i> MedPlex Premium Quizzes</h3>
                    <div class="panel-actions">
                        <button class="btn btn-primary" id="refresh-premium-quizzes">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <div class="homepage-section">
                    <h3>Premium Quiz Collection</h3>
                    <p>Access our exclusive collection of premium quizzes designed by expert faculty. Each quiz includes comprehensive coverage of topics with detailed solutions.</p>
                </div>
                
                <div class="premium-quizzes-container">
                    <div class="premium-quizzes-header">
                        <h4 style="font-size: 0.648rem; color: var(--vibrant-1); margin: 0;">
                            <i class="fas fa-database"></i> Live Quiz Database
                        </h4>
                        <div style="font-size: 0.405rem; color: var(--vibrant-3);">
                            Auto-refreshes every 2 minutes
                        </div>
                    </div>
                    
                    <div class="premium-stats" id="premium-stats" style="display: none;">
                        <div class="premium-stat-card">
                            <div class="premium-stat-value" id="premium-total-quizzes">0</div>
                            <div class="premium-stat-label">Total Quizzes</div>
                        </div>
                        <div class="premium-stat-card">
                            <div class="premium-stat-value" id="premium-avg-mcqs">0</div>
                            <div class="premium-stat-label">Avg. MCQs</div>
                        </div>
                        <div class="premium-stat-card">
                            <div class="premium-stat-value" id="premium-total-time">0</div>
                            <div class="premium-stat-label">Total Minutes</div>
                        </div>
                        <div class="premium-stat-card">
                            <div class="premium-stat-value" id="premium-last-updated">-</div>
                            <div class="premium-stat-label">Last Updated</div>
                        </div>
                    </div>
                    
                    <div id="premium-loader" style="display: none; text-align: center; padding: 19.44px;">
                        <div class="loading-spinner" style="margin: 0 auto;"></div>
                        <p style="margin-top: 9.72px; font-size: 0.486rem; color: var(--vibrant-3);">Loading premium quizzes...</p>
                    </div>
                    
                    <div class="premium-quizzes-grid" id="premium-quizzes-grid">
                        <!-- Premium quiz cards will be inserted here -->
                    </div>
                    
                    <div id="premium-empty" style="text-align: center; padding: 38.88px; color: var(--vibrant-3);">
                        <i class="fas fa-crown fa-3x" style="margin-bottom: 12.15px; color: var(--vibrant-3);"></i>
                        <p>Loading premium quizzes from database...</p>
                        <p style="font-size: 0.405rem; margin-top: 3.24px;">Quizzes will be automatically loaded</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 MedPlex Academy. All rights reserved.</p>
                <p>Developed with <i class="fas fa-heart" style="color: #1D4ED8;"></i> for aspiring medical students</p>
            </div>
        </div>
    </footer>

    <!-- KaTeX Scripts -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ]
        });"></script>

    <script>
        // Registration and Login AppScript URL
        const REGISTRATION_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxsffUWLynk_vk5_LAC5uBp5aNKPYOhk8_hEUN9GfCNf1RJi5iIqqri_SQ5-CaDLntCgQ/exec';
        
        // Other AppScript URL for other functions
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyDTyimK5pG81VKQ1sHIrgWUJWQGd3uAz7JTkHcP2qjgRQDGDjIhlsVzTR8u5F_Q_QP/exec';
        
        // Quiz System AppScript URL
        const QUIZ_SYSTEM_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbycEX7jspcDhbpYnuqiRnBEUx_5E5f7zPzBgxuRooVwsTVkll3YGPTBLLoAHstjAEZN/exec';
        
        // NEW: Contact Form AppScript URL
        const CONTACT_FORM_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyd8t5f7Ioirt3I70i9n4uTd8-mKN3zafKKsKMp2-xQMfD_A7fV24PZi6CqBZZenUpy_Q/exec';
        
        // NEW: MedPlex Notes AppScript URL
        const NOTES_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxcLA2GbypgV3ocyuQj8-hD84kYFyVOBZIVcM66vadk01YC98dJ3mgZRRWSfVie_Pgf/exec';
        
        // NEW: Premium Quizzes AppScript URL
        const PREMIUM_QUIZZES_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby3315K93z-bv3FGUW7dqX9BJbAZJZkXAWxkJVYcehDZheNLLGViOm3Z3VgwX9LdaY/exec';

        // Global variables
        let currentQuiz = null;
        let currentStudent = null;
        let bank1Data = [];
        let currentBankPage = 1;
        const MCQS_PER_PAGE = 20;

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the application
            initApp();
            
            function initApp() {
                // Check if user is already logged in
                const savedStudent = localStorage.getItem('medplexStudent');
                if (savedStudent) {
                    try {
                        currentStudent = JSON.parse(savedStudent);
                        showStudentDashboard();
                    } catch (e) {
                        console.error('Error parsing saved student data:', e);
                        localStorage.removeItem('medplexStudent');
                    }
                }
                
                // Set up event listeners for welcome screen
                document.getElementById('start-btn').addEventListener('click', () => {
                    document.getElementById('welcome-overlay').classList.add('hidden');
                });
                
                // Hide welcome animation after delay
                setTimeout(() => {
                    document.getElementById('welcome-overlay').classList.add('hidden');
                }, 5000);
                
                // Set up tab navigation
                setupTabs();
                
                // Set up event listeners
                setupEventListeners();
                
                // Load quizzes if logged in
                if (currentStudent) {
                    loadQuizzes();
                    updateStats();
                    
                    // Auto-load premium quizzes
                    setTimeout(() => {
                        if (currentStudent) {
                            fetchPremiumQuizzes();
                        }
                    }, 1000);
                }
                
                // Apply animations
                applyAnimations();
                
                // Setup contact form
                setupContactForm();
                
                // Setup Bank functionality
                setupBank1();
                
                // Setup Notes functionality
                setupNotes();
                
                // Setup Premium Quizzes functionality
                setupPremiumQuizzes();
                
                // Initialize Quiz System
                quizSystem.init();
            }
            
            function setupTabs() {
                const tabButtons = document.querySelectorAll('.nav-btn[data-tab]');
                const tabContents = document.querySelectorAll('.tab-content');
                
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Check if tab is restricted and user is not logged in
                        if (button.classList.contains('restricted-tab') && !currentStudent) {
                            alert('Please login to access this section');
                            return;
                        }
                        
                        const tabId = button.getAttribute('data-tab');
                        
                        // Update active tab button
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        
                        // Show active content
                        tabContents.forEach(content => content.classList.remove('active'));
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                        
                        // Special handling for Bank tabs
                        if (tabId === 'bank1' && currentStudent) {
                            // Auto-load Biology MCQs for learning
                            setTimeout(() => {
                                const bioBtn = document.querySelector('#bank1-tab .subject-btn[data-subject="Biology"]');
                                if (bioBtn && !document.querySelector('#bank1-tab .subject-btn.active')) {
                                    bioBtn.click();
                                }
                            }, 100);
                        }
                        
                        // Auto-load premium quizzes when tab is opened
                        if (tabId === 'premium-quizzes' && currentStudent) {
                            setTimeout(() => {
                                fetchPremiumQuizzes();
                            }, 500);
                        }
                        
                        // Load notes topics when tab is opened
                        if (tabId === 'notes' && currentStudent) {
                            setTimeout(() => {
                                loadNotesTopics();
                            }, 500);
                        }
                    });
                });
            }
            
            function setupEventListeners() {
                // Hamburger menu toggle
                document.getElementById('menu-toggle').addEventListener('click', toggleMenu);
                
                // Theme toggle
                document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
                
                // Auth tab buttons
                document.getElementById('register-tab-btn').addEventListener('click', () => {
                    showAuthForm('register');
                });
                
                document.getElementById('login-tab-btn').addEventListener('click', () => {
                    showAuthForm('login');
                });
                
                // Registration form submission
                document.getElementById('registration-form').addEventListener('submit', handleRegistration);
                
                // Login form submission
                document.getElementById('login-form-elements').addEventListener('submit', handleLogin);
                
                // Logout button
                document.getElementById('logout-btn').addEventListener('click', handleLogout);
                
                // Refresh buttons
                document.getElementById('refresh-bank1').addEventListener('click', () => {
                    const activeSubject = document.querySelector('#bank1-tab .subject-btn.active');
                    if (activeSubject) {
                        fetchLearningMCQs(activeSubject.getAttribute('data-subject'));
                    }
                });
                
                // Password modal events
                document.getElementById('close-modal').addEventListener('click', closePasswordModal);
                document.getElementById('submit-password').addEventListener('click', submitPassword);
                document.getElementById('quiz-password').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        submitPassword();
                    }
                });
                
                // Close modal when clicking outside
                document.getElementById('password-modal').addEventListener('click', (e) => {
                    if (e.target.id === 'password-modal') {
                        closePasswordModal();
                    }
                });
                
                // FAQ functionality
                setupFAQ();
            }
            
            function showAuthForm(formType) {
                // Update tab buttons
                document.getElementById('register-tab-btn').classList.remove('active');
                document.getElementById('login-tab-btn').classList.remove('active');
                
                // Hide all forms
                document.getElementById('register-form').classList.remove('active');
                document.getElementById('login-form').classList.remove('active');
                
                // Show selected form
                if (formType === 'register') {
                    document.getElementById('register-tab-btn').classList.add('active');
                    document.getElementById('register-form').classList.add('active');
                } else {
                    document.getElementById('login-tab-btn').classList.add('active');
                    document.getElementById('login-form').classList.add('active');
                }
            }
            
            async function handleRegistration(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('register-submit-btn');
                const messageDiv = document.getElementById('register-message');
                
                // Get form data
                const formData = {
                    name: document.getElementById('reg-name').value.trim(),
                    'father-name': document.getElementById('reg-father-name').value.trim(),
                    email: document.getElementById('reg-email').value.trim(),
                    phone: document.getElementById('reg-phone').value.trim(),
                    'secondary-phone': document.getElementById('reg-secondary-phone').value.trim() || 'N/A',
                    province: document.getElementById('reg-province').value,
                    district: document.getElementById('reg-district').value.trim(),
                    'mdcat-status': document.getElementById('reg-mdcat-status').value,
                    'mdcat-marks': document.getElementById('reg-mdcat-marks').value.trim() || 'N/A',
                    'matric-obtained': document.getElementById('reg-matric-obtained').value.trim(),
                    'matric-total': document.getElementById('reg-matric-total').value.trim(),
                    'fsc-obtained': document.getElementById('reg-fsc-obtained').value.trim(),
                    'fsc-total': document.getElementById('reg-fsc-total').value.trim()
                };
                
                // Validate required fields
                for (const [key, value] of Object.entries(formData)) {
                    if (!value && key !== 'secondary-phone' && key !== 'mdcat-marks') {
                        showAuthMessage(messageDiv, 'error', 'Please fill in all required fields');
                        return;
                    }
                }
                
                // Validate email
                if (!isValidEmail(formData.email)) {
                    showAuthMessage(messageDiv, 'error', 'Please enter a valid email address');
                    return;
                }
                
                // Validate phone
                if (!isValidPhone(formData.phone)) {
                    showAuthMessage(messageDiv, 'error', 'Please enter a valid phone number');
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Registering...';
                
                try {
                    // Send registration request
                    const response = await fetch(REGISTRATION_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({
                            action: 'register',
                            payload: formData
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // Store student data
                        currentStudent = {
                            id: result.id,
                            name: formData.name,
                            email: formData.email,
                            ...formData
                        };
                        
                        localStorage.setItem('medplexStudent', JSON.stringify(currentStudent));
                        
                        // Show success message
                        showAuthMessage(messageDiv, 'success', `Registration successful! Your Registration ID: ${result.id}`);
                        
                        // Show student dashboard after delay
                        setTimeout(() => {
                            showStudentDashboard();
                        }, 2000);
                    } else {
                        showAuthMessage(messageDiv, 'error', result.message || 'Registration failed. Please try again.');
                    }
                } catch (error) {
                    console.error('Registration error:', error);
                    showAuthMessage(messageDiv, 'error', 'Network error. Please check your connection and try again.');
                } finally {
                    // Reset button state
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register Now';
                }
            }
            
            async function handleLogin(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('login-submit-btn');
                const messageDiv = document.getElementById('login-message');
                
                // Get form data
                const formData = {
                    regId: document.getElementById('login-reg-id').value.trim(),
                    email: document.getElementById('login-email').value.trim()
                };
                
                // Validate fields
                if (!formData.regId || !formData.email) {
                    showAuthMessage(messageDiv, 'error', 'Please enter both Registration ID and Email');
                    return;
                }
                
                // Validate email
                if (!isValidEmail(formData.email)) {
                    showAuthMessage(messageDiv, 'error', 'Please enter a valid email address');
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
                
                try {
                    // Send login request
                    const response = await fetch(REGISTRATION_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({
                            action: 'signin',
                            payload: formData
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // Store student data
                        currentStudent = {
                            id: result.student.id,
                            name: result.student.name,
                            email: formData.email,
                            status: result.student.status,
                            'father-name': result.student['father-name'] || '',
                            province: result.student.province || '',
                            district: result.student.district || ''
                        };
                        
                        localStorage.setItem('medplexStudent', JSON.stringify(currentStudent));
                        
                        // Show success message
                        showAuthMessage(messageDiv, 'success', `Welcome back, ${result.student.name}!`);
                        
                        // Show student dashboard after delay
                        setTimeout(() => {
                            showStudentDashboard();
                        }, 1500);
                    } else {
                        showAuthMessage(messageDiv, 'error', result.message || 'Login failed. Please check your credentials.');
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    showAuthMessage(messageDiv, 'error', 'Network error. Please check your connection and try again.');
                } finally {
                    // Reset button state
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
                }
            }
            
            function handleLogout() {
                // Clear student data
                currentStudent = null;
                localStorage.removeItem('medplexStudent');
                
                // Reset UI to auth forms
                document.getElementById('auth-forms-container').style.display = 'block';
                document.getElementById('student-dashboard').classList.remove('active');
                
                // Hide restricted tabs and stats
                document.querySelectorAll('.restricted-tab').forEach(tab => {
                    tab.style.display = 'none';
                });
                document.getElementById('stats-panel').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'none';
                
                // Reset auth forms
                document.getElementById('registration-form').reset();
                document.getElementById('login-form-elements').reset();
                showAuthForm('register');
                
                // Show success message
                alert('You have been logged out successfully.');
                
                // Switch to home tab
                document.querySelector('.nav-btn[data-tab="home"]').click();
            }
            
            function showStudentDashboard() {
                // Hide auth forms
                document.getElementById('auth-forms-container').style.display = 'none';
                
                // Show student dashboard
                document.getElementById('student-dashboard').classList.add('active');
                
                // Update student info
                document.getElementById('student-name').textContent = currentStudent.name;
                
                // Populate student info grid (removed phone, MDCAT status, and district)
                const infoGrid = document.getElementById('student-info-grid');
                infoGrid.innerHTML = `
                    <div class="info-item">
                        <span class="info-label">Registration ID:</span>
                        <span class="info-value">${currentStudent.id}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Name:</span>
                        <span class="info-value">${currentStudent.name}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Father's Name:</span>
                        <span class="info-value">${currentStudent['father-name'] || 'N/A'}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Email:</span>
                        <span class="info-value">${currentStudent.email}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Province:</span>
                        <span class="info-value">${currentStudent.province || 'N/A'}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Account Status:</span>
                        <span class="info-value" style="color: ${currentStudent.status === 'Confirmed' ? 'var(--success)' : 'var(--warning)'}">
                            ${currentStudent.status || 'Pending'}
                        </span>
                    </div>
                `;
                
                // Show restricted tabs
                document.querySelectorAll('.restricted-tab').forEach(tab => {
                    tab.style.display = 'flex';
                });
                
                // Show stats panel
                document.getElementById('stats-panel').style.display = 'grid';
                
                // Show logout button
                document.getElementById('logout-btn').style.display = 'flex';
                
                // Load quizzes and update stats
                loadQuizzes();
                updateStats();
                
                // Auto-load premium quizzes
                setTimeout(() => {
                    fetchPremiumQuizzes();
                }, 1000);
            }
            
            function showAuthMessage(element, type, message) {
                element.textContent = message;
                element.className = 'auth-message ' + (type === 'success' ? 'auth-success' : 'auth-error');
                element.style.display = 'block';
                
                // Scroll to message
                element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                
                // Auto-hide success messages after 5 seconds
                if (type === 'success') {
                    setTimeout(() => {
                        element.style.display = 'none';
                    }, 5000);
                }
            }
            
            function isValidEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
            
            function isValidPhone(phone) {
                // Pakistani phone number validation (03XXXXXXXXX)
                const re = /^03\d{9}$/;
                return re.test(phone);
            }
            
            function setupFAQ() {
                const faqItems = document.querySelectorAll('.enhanced-faq-item');
                
                faqItems.forEach(item => {
                    const question = item.querySelector('.enhanced-faq-question');
                    
                    question.addEventListener('click', () => {
                        // Close all other FAQ items
                        faqItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                            }
                        });
                        
                        // Toggle current item
                        item.classList.toggle('active');
                    });
                });
            }
            
            function setupContactForm() {
                const form = document.getElementById('contactForm');
                const btn = document.getElementById('contact-submit-btn');
                const status = document.getElementById('contact-status-message');

                form.addEventListener('submit', e => {
                    e.preventDefault();
                    
                    btn.disabled = true;
                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                    status.style.display = 'none';

                    // Prepare data object
                    const data = {
                        type: 'contact_form',
                        name: form.name.value,
                        email: form.email.value,
                        phone: form.phone.value,
                        district: form.district.value,
                        message: form.message.value
                    };

                    // Send data to NEW Apps Script URL
                    fetch(CONTACT_FORM_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        cache: 'no-cache',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    })
                    .then(() => {
                        // Since no-cors doesn't return a readable body, we assume success if no error
                        status.className = 'contact-success';
                        status.innerHTML = "<i class='fas fa-check-circle'></i> Query Submitted Successfully! Check your email for confirmation.";
                        status.style.display = 'block';
                        form.reset();
                        btn.disabled = false;
                        btn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
                    })
                    .catch(error => {
                        status.className = 'contact-error';
                        status.innerHTML = "<i class='fas fa-exclamation-circle'></i> Error: " + error.message;
                        status.style.display = 'block';
                        btn.disabled = false;
                        btn.innerHTML = '<i class="fas fa-paper-plane"></i> Try Again';
                    });
                });
            }
            
            function setupBank1() {
                // Subject buttons for Learning Mode
                const subjectButtons = document.querySelectorAll('#bank1-tab .subject-btn');
                subjectButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        // Remove active class from all buttons
                        subjectButtons.forEach(btn => btn.classList.remove('active'));
                        // Add active class to clicked button
                        this.classList.add('active');
                        
                        // Reset to page 1
                        currentBankPage = 1;
                        
                        // Fetch MCQs for selected subject
                        const subject = this.getAttribute('data-subject');
                        fetchLearningMCQs(subject);
                    });
                });
                
                // Pagination event listeners
                document.getElementById('first-page')?.addEventListener('click', () => goToPage(1));
                document.getElementById('prev-page')?.addEventListener('click', () => goToPage(currentBankPage - 1));
                document.getElementById('next-page')?.addEventListener('click', () => goToPage(currentBankPage + 1));
                document.getElementById('last-page')?.addEventListener('click', () => goToPage(Math.ceil(bank1Data.length / MCQS_PER_PAGE)));
                
                // Auto-load Biology on first load
                const bioBtn = document.querySelector('#bank1-tab .subject-btn[data-subject="Biology"]');
                if (bioBtn && currentStudent) {
                    setTimeout(() => {
                        fetchLearningMCQs('Biology');
                    }, 500);
                }
            }
            
            function setupNotes() {
                document.getElementById('load-notes-btn').addEventListener('click', loadNotesDetails);
                document.getElementById('refresh-notes').addEventListener('click', loadNotesTopics);
            }
            
            function setupPremiumQuizzes() {
                document.getElementById('refresh-premium-quizzes').addEventListener('click', fetchPremiumQuizzes);
            }
            
            async function fetchLearningMCQs(subject) {
                const container = document.getElementById('bank1-content');
                const loader = document.getElementById('bank1-loader');
                const pagination = document.getElementById('bank1-pagination');
                
                container.innerHTML = "";
                loader.style.display = "block";
                pagination.style.display = "none";
                
                try {
                    const response = await fetch(APPS_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({ 
                            type: 'get_mcqs', 
                            subject: subject === 'All' ? '' : subject 
                        })
                    });
                    const result = await response.json();
                    
                    if(result.success && result.data && result.data.length > 0) {
                        bank1Data = result.data;
                        renderLearningMCQs();
                        setupPagination();
                    } else {
                        container.innerHTML = `
                            <div class="bank-no-data">
                                <i class="fas fa-database fa-2x" style="margin-bottom: 6.48px; color: var(--vibrant-3);"></i>
                                <p>No MCQs found for ${subject} in the database.</p>
                                <p style="font-size: 0.405rem; margin-top: 3.24px;">Try selecting a different subject or check back later.</p>
                            </div>
                        `;
                        pagination.style.display = "none";
                    }
                } catch (error) {
                    console.error('Fetch error:', error);
                    container.innerHTML = `
                        <div class="bank-no-data">
                            <i class="fas fa-exclamation-triangle fa-2x" style="margin-bottom: 6.48px; color: var(--warning);"></i>
                            <p>Error fetching MCQs from database.</p>
                            <p style="font-size: 0.405rem; margin-top: 3.24px;">Please check your connection and try again.</p>
                        </div>
                    `;
                    pagination.style.display = "none";
                } finally {
                    loader.style.display = "none";
                }
            }
            
            function renderLearningMCQs() {
                const container = document.getElementById('bank1-content');
                
                if (!bank1Data || bank1Data.length === 0) {
                    container.innerHTML = `
                        <div class="bank-no-data">
                            <i class="fas fa-database fa-2x" style="margin-bottom: 6.48px; color: var(--vibrant-3);"></i>
                            <p>No MCQs found in the database.</p>
                            <p style="font-size: 0.405rem; margin-top: 3.24px;">Try selecting a different subject or check back later.</p>
                        </div>
                    `;
                    return;
                }
                
                const startIndex = (currentBankPage - 1) * MCQS_PER_PAGE;
                const endIndex = Math.min(startIndex + MCQS_PER_PAGE, bank1Data.length);
                const pageData = bank1Data.slice(startIndex, endIndex);
                
                container.innerHTML = pageData.map((m, i) => {
                    const globalIndex = startIndex + i;
                    // Convert correctAnswer from number to letter if needed
                    let correctAnswer = m.correctAnswer;
                    if (typeof correctAnswer === 'number') {
                        correctAnswer = String.fromCharCode(65 + correctAnswer);
                    }
                    
                    return `
                        <div class="learning-question fade-in">
                            <div class="learning-question-header">
                                <div class="learning-question-id">MCQ #${globalIndex + 1}</div>
                                <div style="font-size: 0.405rem; color: var(--vibrant-3); font-weight: 600;">
                                    <i class="fas fa-book"></i> ${m.subject || 'General'} | <i class="fas fa-tag"></i> ${m.topic || 'General Topic'}
                                </div>
                            </div>
                            <div class="learning-question-text">${m.question || 'No question text'}</div>
                            <div class="learning-options">
                                <div class="learning-option ${correctAnswer==='A'?'correct':''}">
                                    <strong style="color: ${correctAnswer==='A'?'var(--success)':'var(--vibrant-1)'}">A)</strong> ${m.options && m.options[0] ? m.options[0] : 'Option A'}
                                </div>
                                <div class="learning-option ${correctAnswer==='B'?'correct':''}">
                                    <strong style="color: ${correctAnswer==='B'?'var(--success)':'var(--vibrant-1)'}">B)</strong> ${m.options && m.options[1] ? m.options[1] : 'Option B'}
                                </div>
                                <div class="learning-option ${correctAnswer==='C'?'correct':''}">
                                    <strong style="color: ${correctAnswer==='C'?'var(--success)':'var(--vibrant-1)'}">C)</strong> ${m.options && m.options[2] ? m.options[2] : 'Option C'}
                                </div>
                                <div class="learning-option ${correctAnswer==='D'?'correct':''}">
                                    <strong style="color: ${correctAnswer==='D'?'var(--success)':'var(--vibrant-1)'}">D)</strong> ${m.options && m.options[3] ? m.options[3] : 'Option D'}
                                </div>
                            </div>
                            <div class="reasoning-container">
                                ${m.reasoningCorrect ? `
                                    <div class="reasoning-correct">
                                        <div class="learning-reasoning-title">
                                            <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                            <span>Correct Reasoning:</span>
                                        </div>
                                        <div>${m.reasoningCorrect}</div>
                                    </div>
                                ` : ''}
                                ${(m.reasoningIncorrectI || m.reasoningIncorrectII || m.reasoningIncorrectIII) ? `
                                    <div class="reasoning-incorrect">
                                        <div class="learning-reasoning-title">
                                            <i class="fas fa-times-circle" style="color: var(--warning);"></i>
                                            <span>Incorrect Reasonings:</span>
                                        </div>
                                        ${m.reasoningIncorrectI ? `
                                            <div class="reasoning-incorrect-item">
                                                <div class="reasoning-incorrect-label">
                                                    <i class="fas fa-times"></i> Option A Incorrect:
                                                </div>
                                                <div class="reasoning-incorrect-text">${m.reasoningIncorrectI}</div>
                                            </div>
                                        ` : ''}
                                        ${m.reasoningIncorrectII ? `
                                            <div class="reasoning-incorrect-item">
                                                <div class="reasoning-incorrect-label">
                                                    <i class="fas fa-times"></i> Option B Incorrect:
                                                </div>
                                                <div class="reasoning-incorrect-text">${m.reasoningIncorrectII}</div>
                                            </div>
                                        ` : ''}
                                        ${m.reasoningIncorrectIII ? `
                                            <div class="reasoning-incorrect-item">
                                                <div class="reasoning-incorrect-label">
                                                    <i class="fas fa-times"></i> Option C Incorrect:
                                                </div>
                                                <div class="reasoning-incorrect-text">${m.reasoningIncorrectIII}</div>
                                            </div>
                                        ` : ''}
                                    </div>
                                ` : ''}
                            </div>
                            <div class="learning-meta">
                                <div>
                                    <strong><i class="fas fa-bookmark" style="color: var(--vibrant-3);"></i> Reference:</strong> ${m.reference || 'N/A'} | 
                                    <strong><i class="fas fa-check-circle" style="color: var(--success);"></i> Correct Answer:</strong> ${correctAnswer}
                                </div>
                                <div>
                                    <strong><i class="fas fa-hashtag" style="color: var(--vibrant-3);"></i> ID:</strong> ${m.id || `MCQ-${globalIndex + 1}`}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            function setupPagination() {
                const totalPages = Math.ceil(bank1Data.length / MCQS_PER_PAGE);
                const pagination = document.getElementById('bank1-pagination');
                const pageNumbers = document.getElementById('page-numbers');
                const currentPageSpan = document.getElementById('current-page');
                const totalPagesSpan = document.getElementById('total-pages');
                
                currentPageSpan.textContent = currentBankPage;
                totalPagesSpan.textContent = totalPages;
                
                if (totalPages <= 1) {
                    pagination.style.display = "none";
                    return;
                }
                
                pagination.style.display = "flex";
                
                // Update button states
                document.getElementById('first-page').classList.toggle('disabled', currentBankPage === 1);
                document.getElementById('prev-page').classList.toggle('disabled', currentBankPage === 1);
                document.getElementById('next-page').classList.toggle('disabled', currentBankPage === totalPages);
                document.getElementById('last-page').classList.toggle('disabled', currentBankPage === totalPages);
                
                // Generate page numbers
                pageNumbers.innerHTML = '';
                let startPage = Math.max(1, currentBankPage - 2);
                let endPage = Math.min(totalPages, currentBankPage + 2);
                
                if (startPage > 1) {
                    const page1 = document.createElement('div');
                    page1.className = 'page-number';
                    page1.textContent = '1';
                    page1.onclick = () => goToPage(1);
                    pageNumbers.appendChild(page1);
                    
                    if (startPage > 2) {
                        const ellipsis = document.createElement('div');
                        ellipsis.className = 'page-number';
                        ellipsis.textContent = '...';
                        ellipsis.style.cursor = 'default';
                        pageNumbers.appendChild(ellipsis);
                    }
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    const pageNumber = document.createElement('div');
                    pageNumber.className = 'page-number';
                    if (i === currentBankPage) {
                        pageNumber.classList.add('active');
                    }
                    pageNumber.textContent = i;
                    pageNumber.onclick = () => goToPage(i);
                    pageNumbers.appendChild(pageNumber);
                }
                
                if (endPage < totalPages) {
                    if (endPage < totalPages - 1) {
                        const ellipsis = document.createElement('div');
                        ellipsis.className = 'page-number';
                        ellipsis.textContent = '...';
                        ellipsis.style.cursor = 'default';
                        pageNumbers.appendChild(ellipsis);
                    }
                    
                    const lastPage = document.createElement('div');
                    lastPage.className = 'page-number';
                    lastPage.textContent = totalPages;
                    lastPage.onclick = () => goToPage(totalPages);
                    pageNumbers.appendChild(lastPage);
                }
            }
            
            function goToPage(page) {
                const totalPages = Math.ceil(bank1Data.length / MCQS_PER_PAGE);
                if (page < 1 || page > totalPages || page === currentBankPage) return;
                
                currentBankPage = page;
                renderLearningMCQs();
                setupPagination();
                
                // Scroll to top of content
                document.getElementById('bank1-content').scrollIntoView({ behavior: 'smooth' });
            }
            
            async function loadNotesTopics() {
                const select = document.getElementById('notes-topic-select');
                const loader = document.getElementById('notes-loader');
                const content = document.getElementById('notes-content');
                const empty = document.getElementById('notes-empty');
                
                select.innerHTML = '<option value="">Loading topics...</option>';
                loader.style.display = 'block';
                content.style.display = 'none';
                empty.style.display = 'none';
                
                try {
                    const response = await fetch(NOTES_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({ type: 'get_topic_list' })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success && result.data && result.data.length > 0) {
                        select.innerHTML = '<option value="">Select a topic to view notes...</option>';
                        result.data.forEach(item => {
                            const option = document.createElement('option');
                            option.value = item.topic;
                            option.textContent = `${item.book} - ${item.topic}`;
                            select.appendChild(option);
                        });
                        
                        empty.style.display = 'block';
                    } else {
                        select.innerHTML = '<option value="">No topics available</option>';
                        empty.innerHTML = `
                            <i class="fas fa-book fa-2x" style="margin-bottom: 9.72px;"></i>
                            <p>No study notes available at the moment</p>
                            <p style="font-size: 0.405rem; margin-top: 3.24px;">Please check back later</p>
                        `;
                        empty.style.display = 'block';
                    }
                } catch (error) {
                    console.error('Error loading notes topics:', error);
                    select.innerHTML = '<option value="">Error loading topics</option>';
                    empty.innerHTML = `
                        <i class="fas fa-exclamation-triangle fa-2x" style="margin-bottom: 9.72px; color: var(--warning);"></i>
                        <p>Error loading study notes</p>
                        <p style="font-size: 0.405rem; margin-top: 3.24px;">Please check your connection</p>
                    `;
                    empty.style.display = 'block';
                } finally {
                    loader.style.display = 'none';
                }
            }
            
            async function loadNotesDetails() {
                const topicName = document.getElementById('notes-topic-select').value;
                if (!topicName) {
                    alert("Please select a topic first.");
                    return;
                }
                
                const loader = document.getElementById('notes-loader');
                const content = document.getElementById('notes-content');
                const empty = document.getElementById('notes-empty');
                
                loader.style.display = 'block';
                content.style.display = 'none';
                empty.style.display = 'none';
                
                try {
                    const response = await fetch(NOTES_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({ 
                            type: 'get_topic_details',
                            topicName: topicName
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success && result.data) {
                        const data = result.data;
                        
                        // Update metadata
                        document.getElementById('notes-book').textContent = data.meta.book || '-';
                        document.getElementById('notes-topic').textContent = data.meta.topic || '-';
                        document.getElementById('notes-mcq-count').textContent = data.mcqs.length || 0;
                        document.getElementById('notes-keypoints-count').textContent = data.keyPoints.filter(p => p).length || 0;
                        
                        // Update theory sections
                        document.getElementById('notes-theory').textContent = data.content.theory || 'No theory content available.';
                        document.getElementById('notes-explanation').textContent = data.content.explained || 'No explanation available.';
                        
                        // Update exceptions section
                        if (data.content.exceptions && data.content.exceptions.trim()) {
                            document.getElementById('notes-exceptions').textContent = data.content.exceptions;
                            document.getElementById('notes-exceptions-section').style.display = 'block';
                        } else {
                            document.getElementById('notes-exceptions-section').style.display = 'none';
                        }
                        
                        // Update key points
                        const keypointsContainer = document.getElementById('notes-keypoints');
                        keypointsContainer.innerHTML = '';
                        
                        if (data.keyPoints && data.keyPoints.filter(p => p).length > 0) {
                            data.keyPoints.forEach((point, index) => {
                                if (point && point.trim()) {
                                    const icons = ['fa-key', 'fa-lightbulb', 'fa-star', 'fa-check', 'fa-bookmark', 'fa-flag', 'fa-bullseye', 'fa-gem'];
                                    const iconIndex = index % icons.length;
                                    
                                    keypointsContainer.innerHTML += `
                                        <div class="key-point-card">
                                            <div class="key-point-icon">
                                                <i class="fas ${icons[iconIndex]}"></i>
                                            </div>
                                            <div class="key-point-text">
                                                <strong>${index + 1}.</strong> ${point}
                                            </div>
                                        </div>
                                    `;
                                }
                            });
                            document.getElementById('notes-keypoints-section').style.display = 'block';
                        } else {
                            document.getElementById('notes-keypoints-section').style.display = 'none';
                        }
                        
                        // Update MCQs
                        const mcqsContainer = document.getElementById('notes-mcqs-list');
                        mcqsContainer.innerHTML = '';
                        
                        if (data.mcqs && data.mcqs.length > 0) {
                            data.mcqs.forEach((mcq, index) => {
                                const mcqId = `notes-mcq-${index}`;
                                mcqsContainer.innerHTML += `
                                    <div class="notes-mcq-card">
                                        <div class="notes-mcq-question">
                                            <strong>Q${index + 1}:</strong> ${mcq.question}
                                        </div>
                                        <div class="notes-mcq-options">
                                            <div class="notes-mcq-option ${mcq.correct === 'A' ? 'correct' : ''}">
                                                <strong>A)</strong> ${mcq.options[0]}
                                            </div>
                                            <div class="notes-mcq-option ${mcq.correct === 'B' ? 'correct' : ''}">
                                                <strong>B)</strong> ${mcq.options[1]}
                                            </div>
                                            <div class="notes-mcq-option ${mcq.correct === 'C' ? 'correct' : ''}">
                                                <strong>C)</strong> ${mcq.options[2]}
                                            </div>
                                            <div class="notes-mcq-option ${mcq.correct === 'D' ? 'correct' : ''}">
                                                <strong>D)</strong> ${mcq.options[3]}
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary" onclick="toggleNotesSolution('${mcqId}')" style="width: 100%; font-size: 0.486rem; padding: 4.05px;">
                                            <i class="fas fa-eye"></i> Show Solution
                                        </button>
                                        <div id="${mcqId}" class="notes-mcq-solution">
                                            <div class="solution-section">
                                                <h5><i class="fas fa-check-circle"></i> Correct Answer</h5>
                                                <p>${mcq.correct}</p>
                                            </div>
                                            <div class="solution-section">
                                                <h5><i class="fas fa-lightbulb"></i> Reasoning</h5>
                                                <p>${mcq.reasoning}</p>
                                            </div>
                                            <div class="solution-section">
                                                <h5><i class="fas fa-times-circle"></i> Why Others Wrong</h5>
                                                <p>${mcq.incorrectReasoning}</p>
                                            </div>
                                            <div class="solution-section">
                                                <h5><i class="fas fa-book"></i> Reference</h5>
                                                <p>${mcq.reference}</p>
                                            </div>
                                            <div class="solution-section">
                                                <h5><i class="fas fa-tools"></i> Solving Technique</h5>
                                                <p>${mcq.solve}</p>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            });
                            document.getElementById('notes-mcqs-section').style.display = 'block';
                        } else {
                            document.getElementById('notes-mcqs-section').style.display = 'none';
                        }
                        
                        content.style.display = 'block';
                    } else {
                        throw new Error(result.message || 'Failed to load notes');
                    }
                } catch (error) {
                    console.error('Error loading notes details:', error);
                    empty.innerHTML = `
                        <i class="fas fa-exclamation-triangle fa-2x" style="margin-bottom: 9.72px; color: var(--warning);"></i>
                        <p>Error loading study notes for "${topicName}"</p>
                        <p style="font-size: 0.405rem; margin-top: 3.24px;">${error.message}</p>
                    `;
                    empty.style.display = 'block';
                } finally {
                    loader.style.display = 'none';
                }
            }
            
            async function fetchPremiumQuizzes() {
                const grid = document.getElementById('premium-quizzes-grid');
                const loader = document.getElementById('premium-loader');
                const empty = document.getElementById('premium-empty');
                const stats = document.getElementById('premium-stats');
                
                grid.innerHTML = '';
                loader.style.display = 'block';
                empty.style.display = 'none';
                stats.style.display = 'none';
                
                try {
                    const response = await fetch(PREMIUM_QUIZZES_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({ type: 'fetch_quiz_data' })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success && result.quizzes && result.quizzes.length > 0) {
                        // Update stats
                        const totalQuizzes = result.quizzes.length;
                        const totalMCQs = result.quizzes.reduce((sum, quiz) => sum + (parseInt(quiz.mcqCount) || 0), 0);
                        const totalTime = result.quizzes.reduce((sum, quiz) => sum + (parseInt(quiz.timer) || 0), 0);
                        
                        document.getElementById('premium-total-quizzes').textContent = totalQuizzes;
                        document.getElementById('premium-avg-mcqs').textContent = totalQuizzes > 0 ? Math.round(totalMCQs / totalQuizzes) : 0;
                        document.getElementById('premium-total-time').textContent = Math.round(totalTime / 60);
                        document.getElementById('premium-last-updated').textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                        
                        stats.style.display = 'flex';
                        
                        // Render quiz cards
                        result.quizzes.forEach(quiz => {
                            const topics = quiz.topics || 'No topics listed';
                            const formattedTopics = topics.includes(',') ? 
                                topics.split(',').map(t => ` ${t.trim()}`).join('<br>') : 
                                ` ${topics}`;
                            
                            const card = document.createElement('div');
                            card.className = 'premium-quiz-card';
                            card.innerHTML = `
                                <div class="premium-quiz-id">${quiz.password || 'N/A'}</div>
                                <div class="premium-quiz-meta">
                                    <div class="premium-quiz-meta-item">
                                        <i class="fas fa-file-alt"></i>
                                        <span>${quiz.testType || 'Not specified'}</span>
                                    </div>
                                    <div class="premium-quiz-meta-item">
                                        <i class="fas fa-question-circle"></i>
                                        <span>${quiz.mcqCount || 0} MCQs</span>
                                    </div>
                                    <div class="premium-quiz-meta-item">
                                        <i class="fas fa-clock"></i>
                                        <span>${Math.round((quiz.timer || 0)/60)} mins</span>
                                    </div>
                                </div>
                                <div class="premium-quiz-topics">
                                    <strong><i class="fas fa-bookmark"></i> Topics Covered:</strong>
                                    <ul>${formattedTopics}</ul>
                                </div>
                                <div style="margin: 6.48px 0; font-size: 0.405rem; color: var(--vibrant-3);">
                                    <i class="fas fa-book"></i> ${quiz.subjects || 'Subjects not specified'}
                                </div>
                                <div class="premium-quiz-action">
                                    <a href="${quiz.link || '#'}" target="_blank" class="premium-start-btn">
                                        <i class="fas fa-play"></i> Start Quiz Now
                                    </a>
                                </div>
                            `;
                            grid.appendChild(card);
                        });
                        
                        grid.style.display = 'grid';
                    } else {
                        empty.innerHTML = `
                            <i class="fas fa-crown fa-3x" style="margin-bottom: 12.15px; color: var(--vibrant-3);"></i>
                            <p>No premium quizzes available at the moment</p>
                            <p style="font-size: 0.405rem; margin-top: 3.24px;">New quizzes will be added soon</p>
                        `;
                        empty.style.display = 'block';
                    }
                } catch (error) {
                    console.error('Error fetching premium quizzes:', error);
                    empty.innerHTML = `
                        <i class="fas fa-exclamation-triangle fa-3x" style="margin-bottom: 12.15px; color: var(--warning);"></i>
                        <p>Error loading premium quizzes</p>
                        <p style="font-size: 0.405rem; margin-top: 3.24px;">Please check your connection and try again</p>
                        <button class="btn btn-primary" onclick="fetchPremiumQuizzes()" style="margin-top: 9.72px; padding: 4.86px 9.72px;">
                            <i class="fas fa-redo"></i> Retry
                        </button>
                    `;
                    empty.style.display = 'block';
                } finally {
                    loader.style.display = 'none';
                }
            }
            
            function toggleMenu() {
                const menuToggle = document.getElementById('menu-toggle');
                const mainNav = document.getElementById('main-nav');
                
                menuToggle.classList.toggle('active');
                mainNav.classList.toggle('active');
            }
            
            function toggleTheme() {
                const themeToggle = document.getElementById('theme-toggle');
                document.body.classList.toggle('dark-mode');
                themeToggle.classList.toggle('dark');
                saveToLocalStorage('darkMode', document.body.classList.contains('dark-mode'));
            }
            
            function loadQuizzes() {
                if (!currentStudent) return;
                updateStats();
            }
            
            function openPasswordModal(quiz) {
                if (!currentStudent) {
                    alert('Please login to access quizzes');
                    return;
                }
                
                currentQuiz = quiz;
                document.getElementById('password-modal').classList.add('active');
                document.getElementById('quiz-password').value = '';
                document.getElementById('password-error').style.display = 'none';
                document.getElementById('quiz-password').focus();
            }
            
            function closePasswordModal() {
                document.getElementById('password-modal').classList.remove('active');
                currentQuiz = null;
            }
            
            function submitPassword() {
                const passwordInput = document.getElementById('quiz-password');
                const enteredPassword = passwordInput.value.trim();
                const errorElement = document.getElementById('password-error');
                
                if (enteredPassword === currentQuiz.password) {
                    // Password is correct, open the quiz URL
                    window.open(currentQuiz.url, '_blank');
                    closePasswordModal();
                } else {
                    // Password is incorrect
                    errorElement.style.display = 'block';
                    passwordInput.focus();
                }
            }
            
            function updateStats() {
                // Stats are now static since quiz tabs are removed
                document.getElementById('chemistry-quizzes').textContent = 0;
                document.getElementById('biology-quizzes').textContent = 0;
                document.getElementById('physics-quizzes').textContent = 0;
                document.getElementById('english-quizzes').textContent = 0;
                document.getElementById('logical-quizzes').textContent = 0;
            }
            
            function applyAnimations() {
                const elements = document.querySelectorAll('.panel, .card, .nav-btn');
                
                elements.forEach((element, index) => {
                    setTimeout(() => {
                        element.classList.add('fade-in');
                    }, index * 50);
                });
            }
            
            function saveToLocalStorage(key, value) {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                } catch (e) {
                    console.error('Error saving to localStorage:', e);
                }
            }
            
            function getFromLocalStorage(key) {
                try {
                    const value = localStorage.getItem(key);
                    return value ? JSON.parse(value) : null;
                } catch (e) {
                    console.error('Error reading from localStorage:', e);
                    return null;
                }
            }
            
            // Load dark mode setting
            const darkMode = getFromLocalStorage('darkMode');
            if (darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').classList.add('dark');
            }
            
            // Auto-refresh premium quizzes every 2 minutes
            setInterval(() => {
                if (currentStudent && document.getElementById('premium-quizzes-tab').classList.contains('active')) {
                    fetchPremiumQuizzes();
                }
            }, 120000);
        });

        // Global function for notes solution toggle
        function toggleNotesSolution(mcqId) {
            const solution = document.getElementById(mcqId);
            solution.classList.toggle('show');
            
            const button = solution.previousElementSibling;
            if (solution.classList.contains('show')) {
                button.innerHTML = '<i class="fas fa-eye-slash"></i> Hide Solution';
            } else {
                button.innerHTML = '<i class="fas fa-eye"></i> Show Solution';
            }
        }

        // QUIZ SYSTEM JAVASCRIPT
        const quizSystem = {
            // Constants
            DEV_ACCESS_CODE: "MedPlex-Dev-001",
            ACADEMY_NAME: "MedPlex MDCAT Academy",
            WEBSITE_LINK: "https://medplex.com",
            WHATSAPP_CONTACT: "923001234567",
            WHATSAPP_COMMUNITY: "https://chat.whatsapp.com/communitylink",
            DEFAULT_TIME_PER_MCQ: 60,
            MARK_PER_MCQ: 1,
            NEGATIVE_MARKING: 0,
            ENABLE_RETAKE_FULL: true,
            ENABLE_RETAKE_INCORRECT: true,

            // Global state variables
            currentQuizId: '',
            quizData: [],
            currentQuestion: 0,
            userAnswers: [],
            timeLeft: 0,
            questionTimeLeft: 0,
            totalTimeInterval: null,
            questionTimeInterval: null,
            studentData: {},
            studentAccessCode: "",
            studentEmail: "",
            selectedQuizSubject: 'Full Syllabus',
            questionKeys: [],

            // DOM elements
            get statusMessageEl() { return document.getElementById('quiz-system-status-msg'); },
            get questionNavEl() { return document.getElementById('quiz-system-question-nav'); },
            get questionTextEl() { return document.getElementById('quiz-system-question-text'); },
            get optionsContainerEl() { return document.getElementById('quiz-system-options-container'); },
            get reasoningEl() { return document.getElementById('quiz-system-reasoning'); },
            get reasoningTextEl() { return document.getElementById('quiz-system-reasoning-text'); },
            get reasoningBtn() { return document.getElementById('quiz-system-reasoning-btn'); },
            get quizTitleEl() { return document.getElementById('quiz-system-quiz-title'); },
            get quizSubjectEl() { return document.getElementById('quiz-system-quiz-subject'); },
            get perMcqTimeEl() { return document.getElementById('quiz-system-per-mcq-time'); },
            get totalTimerEl() { return document.getElementById('quiz-system-timer'); },
            get questionTimerEl() { return document.getElementById('quiz-system-question-timer'); },
            get quizProgressEl() { return document.getElementById('quiz-system-quiz-progress'); },
            get studentInfoTable() { return document.getElementById('quiz-system-student-info-table'); },
            get quickStatsEl() { return document.getElementById('quiz-system-quick-stats'); },
            get allMcqsList() { return document.getElementById('quiz-system-all-mcqs-list'); },
            get quizAccessCodeInput() { return document.getElementById('quiz-system-quizAccessCode'); },
            get quizAccessErrorBox() { return document.getElementById('quiz-system-quiz-error-box'); },
            get toggleQuizCodeIcon() { return document.getElementById('quiz-system-toggleQuizAccessCode'); },
            get quizNotificationEl() { return document.getElementById('quiz-system-quiz-notification'); },
            get notificationTitleEl() { return document.getElementById('quiz-system-notification-title'); },
            get notificationMessageEl() { return document.getElementById('quiz-system-notification-message'); },
            get notificationYesBtn() { return document.getElementById('quiz-system-notification-yes'); },
            get notificationNoBtn() { return document.getElementById('quiz-system-notification-no'); },
            get retakeFullBtn() { return document.getElementById('quiz-system-retake-full-btn'); },
            get retakeIncorrectBtn() { return document.getElementById('quiz-system-retake-incorrect-btn'); },
            get submissionMessageEl() { return document.getElementById('quiz-system-submission-message'); },
            get resultActionsEl() { return document.getElementById('quiz-system-result-actions'); },
            get mcqCountDisplay() { return document.getElementById('quiz-system-mcq-count-display'); },
            get quizTypeSelect() { return document.getElementById('quiz-system-quiz-type-select'); },
            get timePerMcqSelect() { return document.getElementById('quiz-system-time-per-mcq'); },

            init() {
                // Load saved data
                const storedStudentData = localStorage.getItem('quizSystemStudentData');
                if (storedStudentData) {
                    this.studentData = JSON.parse(storedStudentData);
                    document.getElementById('quiz-system-studentName').value = this.studentData['Student Name'] || '';
                    document.getElementById('quiz-system-fatherName').value = this.studentData['Father Name'] || '';
                    document.getElementById('quiz-system-email').value = this.studentData['Email'] || '';
                    document.getElementById('quiz-system-mobile').value = this.studentData['Mobile'] || '';
                    document.getElementById('quiz-system-city').value = this.studentData['City'] || '';
                }
                const storedCode = localStorage.getItem('quizSystemAccessCode');
                if (storedCode) {
                    this.studentAccessCode = storedCode;
                }
                
                // Set up event listeners
                this.setupEventListeners();
                
                // Update subject selection display
                this.updateSubjectSelection();
                
                // Set retake buttons visibility
                if (this.retakeFullBtn) {
                    this.retakeFullBtn.style.display = this.ENABLE_RETAKE_FULL ? 'flex' : 'none';
                }
                if (this.retakeIncorrectBtn) {
                    this.retakeIncorrectBtn.style.display = this.ENABLE_RETAKE_INCORRECT ? 'flex' : 'none';
                }
            },

            setupEventListeners() {
                // Password visibility toggle
                if (this.toggleQuizCodeIcon) {
                    this.toggleQuizCodeIcon.addEventListener('click', () => this.togglePasswordVisibility('quiz-system-quizAccessCode', 'quiz-system-toggleQuizAccessCode'));
                }

                // Notification buttons
                if (this.notificationYesBtn) {
                    this.notificationYesBtn.addEventListener('click', () => this.handleNotificationResponse(true));
                }
                if (this.notificationNoBtn) {
                    this.notificationNoBtn.addEventListener('click', () => this.handleNotificationResponse(false));
                }
            },

            generateAccessCode() {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let result = '';
                for (let i = 0; i < 12; i++) {
                    result += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return 'MEDPLEX-' + result;
            },

            showStatus(msg, type, duration = 3000) {
                if (!this.statusMessageEl) return;
                this.statusMessageEl.textContent = msg;
                this.statusMessageEl.style.backgroundColor = type === 'success' ? '#10b981' : 
                                            type === 'warning' ? '#f59e0b' : '#ef4444';
                this.statusMessageEl.style.display = 'block';
                setTimeout(() => {
                    if (this.statusMessageEl) {
                        this.statusMessageEl.style.display = 'none';
                    }
                }, duration);
            },

            showPage(pageId) {
                const pages = document.querySelectorAll('.quiz-system-page');
                pages.forEach(page => page.classList.remove('active'));
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                }
                
                // Hide all error/success boxes
                document.querySelectorAll('.quiz-system-error-box, .quiz-system-success-box').forEach(el => {
                    if (el) el.style.display = 'none';
                });
                
                // Re-render KaTeX on page change
                if (window.renderMathInElement) {
                    setTimeout(() => {
                        renderMathInElement(document.body, {
                            delimiters: [
                                {left: '$$', right: '$$', display: true},
                                {left: '$', right: '$', display: false},
                                {left: '\\(', right: '\\)', display: false},
                                {left: '\\[', right: '\\]', display: true}
                            ]
                        });
                    }, 100);
                }
            },

            showQuizNotification(title, message, type = 'info') {
                const allowedNotifications = ['Registration Successful', 'Access Granted', 
                                            'Quiz Completed!', 'Quiz Reset', 'Registration Error', 
                                            'Submission Error', 'Registration Warning', 'MCQs Parsed'];
                
                if (!allowedNotifications.includes(title)) {
                    return;
                }
                
                if (this.notificationTitleEl) this.notificationTitleEl.textContent = title;
                if (this.notificationMessageEl) this.notificationMessageEl.textContent = message;
                
                if (this.quizNotificationEl) {
                    this.quizNotificationEl.classList.remove('warning', 'error');
                    
                    if (type === 'warning') {
                        this.quizNotificationEl.classList.add('warning');
                    } else if (type === 'error') {
                        this.quizNotificationEl.classList.add('error');
                    }
                    
                    this.quizNotificationEl.classList.add('show');
                    
                    setTimeout(() => {
                        if (this.quizNotificationEl && this.quizNotificationEl.classList.contains('show')) {
                            this.hideQuizNotification();
                        }
                    }, 5000);
                }
            },

            hideQuizNotification() {
                if (this.quizNotificationEl) {
                    this.quizNotificationEl.classList.remove('show');
                }
            },

            showQuizAccessForm() {
                const form = document.getElementById('quiz-system-quiz-access-form');
                if (form) {
                    form.style.display = 'flex';
                }
            },

            showRegistrationPage() {
                this.showPage('quiz-system-registration-page');
            },

            togglePasswordVisibility(inputID, iconID) {
                const passwordInput = document.getElementById(inputID);
                const toggleIcon = document.getElementById(iconID);
                
                if (!passwordInput || !toggleIcon) return;
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleIcon.classList.remove('fa-eye-slash');
                    toggleIcon.classList.add('fa-eye');
                } else {
                    passwordInput.type = 'password';
                    toggleIcon.classList.remove('fa-eye');
                    toggleIcon.classList.add('fa-eye-slash');
                }
            },

            updateSubjectSelection() {
                if (!this.quizTypeSelect || !this.mcqCountDisplay) return;
                
                this.selectedQuizSubject = this.quizTypeSelect.value;
                
                let displayText = '';
                switch(this.selectedQuizSubject) {
                    case 'Full Syllabus':
                        displayText = 'Full Syllabus - 180 MCQs (81 Biology, 45 Chemistry, 36 Physics, 9 English, 9 Logical Reasoning)';
                        break;
                    case 'Biology':
                        displayText = 'Biology Only - 81 MCQs';
                        break;
                    case 'Chemistry':
                        displayText = 'Chemistry Only - 45 MCQs';
                        break;
                    case 'Physics':
                        displayText = 'Physics Only - 36 MCQs';
                        break;
                    case 'English':
                        displayText = 'English Only - 30 MCQs';
                        break;
                    case 'Logical Reasoning':
                        displayText = 'Logical Reasoning Only - 30 MCQs';
                        break;
                }
                
                this.mcqCountDisplay.innerHTML = `<strong>Selected:</strong> ${displayText}`;
            },

            async handleRegistration() {
                const sName = document.getElementById('quiz-system-studentName')?.value.trim() || '';
                const fName = document.getElementById('quiz-system-fatherName')?.value.trim() || '';
                const email = document.getElementById('quiz-system-email')?.value.trim() || '';
                const mobile = document.getElementById('quiz-system-mobile')?.value.trim() || '';
                const city = document.getElementById('quiz-system-city')?.value.trim() || '';
                
                if (!sName || !fName || !email || !mobile || !city) {
                    this.showQuizNotification('Registration Error', 'Please fill in all the registration details.', 'error');
                    return;
                }
                
                // Generate access code
                const accessCode = this.generateAccessCode();
                
                // Send registration data to Google Sheet
                try {
                    const response = await fetch(QUIZ_SYSTEM_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({
                            type: 'registration',
                            accessCode: accessCode,
                            name: sName,
                            email: email,
                            mobile: mobile
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        this.studentAccessCode = accessCode;
                        this.studentEmail = email;
                        this.studentData = {
                            'Student Name': sName,
                            'Father Name': fName,
                            'Email': email,
                            'Mobile': mobile,
                            'City': city,
                            'Access Code': accessCode
                        };
                        
                        // Store data locally
                        localStorage.setItem('quizSystemAccessCode', accessCode);
                        localStorage.setItem('quizSystemStudentEmail', email);
                        localStorage.setItem('quizSystemStudentData', JSON.stringify(this.studentData));
                        
                        this.showQuizNotification('Registration Successful', `Your access code: ${accessCode}. You can now access quizzes.`, 'info');
                        this.showPage('quiz-system-quiz-selection-page');
                    } else {
                        this.showQuizNotification('Registration Error', result.message || 'Registration failed', 'error');
                    }
                } catch (error) {
                    this.showQuizNotification('Registration Error', 'Network error. Please try again.', 'error');
                }
            },

            accessQuiz(inputCode) {
                if (!this.quizAccessErrorBox) return;
                
                this.quizAccessErrorBox.style.display = 'none';
                
                const storedStudentCode = localStorage.getItem('quizSystemAccessCode');
                const storedEmail = localStorage.getItem('quizSystemStudentEmail');
                const storedData = JSON.parse(localStorage.getItem('quizSystemStudentData') || '{}');
                
                if (inputCode === storedStudentCode || inputCode === this.DEV_ACCESS_CODE) {
                    this.studentAccessCode = inputCode;
                    this.studentEmail = storedEmail;
                    this.studentData = storedData;
                    
                    this.showQuizNotification('Access Granted', 'Welcome! Select your quiz type to begin.', 'info');
                    this.showPage('quiz-system-quiz-selection-page');
                } else {
                    this.quizAccessErrorBox.style.display = 'block';
                }
            },

            async startSelectedQuiz() {
                if (!this.quizTypeSelect || !this.timePerMcqSelect) return;
                
                this.selectedQuizSubject = this.quizTypeSelect.value;
                const timePerMCQ = parseInt(this.timePerMcqSelect.value) || this.DEFAULT_TIME_PER_MCQ;
                
                // Reset quiz state
                this.currentQuestion = 0;
                this.userAnswers = [];
                this.quizData = [];
                this.questionKeys = [];
                
                this.timeLeft = 180 * timePerMCQ;
                this.questionTimeLeft = timePerMCQ;
                
                // Get student email from local storage
                const studentEmail = localStorage.getItem('quizSystemStudentEmail');
                
                if (!studentEmail && this.studentAccessCode !== this.DEV_ACCESS_CODE) {
                    this.showQuizNotification('Access Error', 'Please register first to access quizzes.', 'error');
                    this.showPage('quiz-system-registration-page');
                    return;
                }
                
                // Fetch MCQs from backend
                try {
                    this.showStatus('Loading quiz questions...', 'info');
                    
                    const response = await fetch(QUIZ_SYSTEM_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify({
                            type: 'fetch_quiz',
                            subject: this.selectedQuizSubject,
                            email: studentEmail || 'demo@medplex.com'
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success && result.mcqs && result.mcqs.length > 0) {
                        // Convert backend format to frontend format
                        this.quizData = result.mcqs.map(mcq => {
                            // Generate unique key for usage tracking
                            const key = mcq[0] + mcq[2];
                            this.questionKeys.push(key);
                            
                            return {
                                question: mcq[2],
                                options: [mcq[3], mcq[4], mcq[5], mcq[6]],
                                correctAnswer: mcq[7].charCodeAt(0) - 65,
                                reasoning: `Correct: ${mcq[8]} | Incorrect Options: ${mcq[9]}, ${mcq[10]}, ${mcq[11]}`,
                                subject: mcq[0],
                                topic: mcq[1],
                                correctReasoning: mcq[8],
                                incorrectReasonings: [mcq[9], mcq[10], mcq[11]]
                            };
                        });
                        
                        this.userAnswers = Array(this.quizData.length).fill(null);
                        this.timeLeft = this.quizData.length * timePerMCQ;
                        
                        this.showPage('quiz-system-quiz-page');
                        this.initQuiz(timePerMCQ);
                        this.showStatus(`Loaded ${this.quizData.length} questions`, 'success');
                    } else {
                        this.showQuizNotification('No Questions Available', 'No MCQs found for this subject. Please try another subject.', 'error');
                        this.showStatus('No questions found', 'error');
                    }
                } catch (error) {
                    this.showQuizNotification('Network Error', 'Failed to load questions. Please check your connection.', 'error');
                    this.showStatus(`Error: ${error.message}`, 'error');
                }
            },

            initQuiz(timePerMCQ = this.DEFAULT_TIME_PER_MCQ) {
                if (!this.quizSubjectEl || !this.perMcqTimeEl || !this.quizTitleEl) return;
                
                this.quizSubjectEl.textContent = this.selectedQuizSubject;
                this.perMcqTimeEl.textContent = Math.floor(timePerMCQ / 60);
                
                this.quizTitleEl.textContent = `${this.selectedQuizSubject} Test - ${this.quizData.length} MCQs`;
                this.renderQuestionNav();
                this.renderQuestion();

                if (this.totalTimeInterval) clearInterval(this.totalTimeInterval);
                if (this.questionTimeInterval) clearInterval(this.questionTimeInterval);
                
                this.totalTimeInterval = setInterval(() => this.updateTotalTimer(), 1000);
                this.questionTimeInterval = setInterval(() => this.updateQuestionTimer(), 1000);
            },

            updateTotalTimer() {
                if (this.timeLeft > 0) {
                    this.timeLeft--;
                    const minutes = Math.floor(this.timeLeft / 60);
                    const seconds = this.timeLeft % 60;
                    if (this.totalTimerEl) {
                        this.totalTimerEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    }
                } else {
                    clearInterval(this.totalTimeInterval);
                    this.submitTest(true);
                }
            },

            updateQuestionTimer() {
                if (this.questionTimeLeft > 0) {
                    this.questionTimeLeft--;
                    if (this.questionTimerEl) {
                        this.questionTimerEl.textContent = `${this.questionTimeLeft}`;
                    }
                } else {
                    const timePerMCQ = parseInt(this.timePerMcqSelect?.value) || this.DEFAULT_TIME_PER_MCQ;
                    this.questionTimeLeft = timePerMCQ;
                    this.navigateQuestion('next');
                }
            },

            renderQuestionNav() {
                if (!this.questionNavEl) return;
                
                this.questionNavEl.innerHTML = '';
                this.quizData.forEach((_, index) => {
                    const navItem = document.createElement('div');
                    navItem.classList.add('quiz-system-question-nav-item');
                    navItem.textContent = index + 1;
                    navItem.onclick = () => this.navigateQuestion(index);
                    
                    if (index === this.currentQuestion) {
                        navItem.classList.add('current');
                    } else if (this.userAnswers[index] !== null) {
                        navItem.classList.add('solved');
                    } else if (this.userAnswers.slice(0, index).some(ans => ans !== null) || index < this.currentQuestion) {
                        navItem.classList.add('visited');
                    }
                    
                    this.questionNavEl.appendChild(navItem);
                });
                this.updateProgressBar();
            },

            updateProgressBar() {
                const solvedCount = this.userAnswers.filter(answer => answer !== null).length;
                const progress = (solvedCount / this.quizData.length) * 100;
                if (this.quizProgressEl) {
                    this.quizProgressEl.style.width = `${progress}%`;
                }
            },

            renderQuestion() {
                if (!this.reasoningEl || !this.reasoningBtn || !this.questionTextEl || !this.optionsContainerEl) return;
                
                this.reasoningEl.style.display = 'none';
                this.reasoningBtn.classList.add('disabled');
                
                if (this.quizData.length === 0) {
                    this.questionTextEl.innerHTML = "No questions available.";
                    this.optionsContainerEl.innerHTML = '';
                    return;
                }
                
                const question = this.quizData[this.currentQuestion];
                this.questionTextEl.innerHTML = `${this.currentQuestion + 1}. ${question.question}`;
                
                this.optionsContainerEl.innerHTML = '';
                question.options.forEach((option, index) => {
                    const optionEl = document.createElement('div');
                    optionEl.classList.add('quiz-system-option');
                    optionEl.innerHTML = option;
                    optionEl.onclick = () => this.selectOption(index);
                    
                    if (this.userAnswers[this.currentQuestion] === index) {
                        optionEl.classList.add('selected');
                    }
                    
                    this.optionsContainerEl.appendChild(optionEl);
                });
                
                const timePerMCQ = parseInt(this.timePerMcqSelect?.value) || this.DEFAULT_TIME_PER_MCQ;
                this.questionTimeLeft = timePerMCQ;
                if (this.questionTimerEl) {
                    this.questionTimerEl.textContent = `${this.questionTimeLeft}`;
                }
                this.renderQuestionNav();
                
                // Re-render KaTeX
                if (window.renderMathInElement) {
                    setTimeout(() => {
                        renderMathInElement(this.optionsContainerEl, {
                            delimiters: [
                                {left: '$$', right: '$$', display: true},
                                {left: '$', right: '$', display: false},
                                {left: '\\(', right: '\\)', display: false},
                                {left: '\\[', right: '\\]', display: true}
                            ]
                        });
                    }, 50);
                }
            },

            selectOption(optionIndex) {
                this.userAnswers[this.currentQuestion] = optionIndex;
                
                // Remove previous selections
                const options = this.optionsContainerEl?.querySelectorAll('.quiz-system-option');
                if (options) {
                    options.forEach(option => {
                        option.classList.remove('selected');
                    });
                    
                    // Add selection to clicked option
                    options[optionIndex]?.classList.add('selected');
                }
                
                // Enable reasoning button
                if (this.reasoningBtn) {
                    this.reasoningBtn.classList.remove('disabled');
                }
                
                this.renderQuestionNav();
            },

            navigateQuestion(direction) {
                const totalQuestions = this.quizData.length;
                if (totalQuestions === 0) return;
                
                let nextIndex;

                if (typeof direction === 'number') {
                    nextIndex = direction;
                } else if (direction === 'next') {
                    nextIndex = (this.currentQuestion + 1) % totalQuestions;
                } else if (direction === 'prev') {
                    nextIndex = (this.currentQuestion - 1 + totalQuestions) % totalQuestions;
                } else {
                    return;
                }

                if (nextIndex === this.currentQuestion) return;
                
                this.currentQuestion = nextIndex;
                this.renderQuestion();
            },

            toggleReasoning() {
                if (!this.reasoningBtn || this.reasoningBtn.classList.contains('disabled') || this.quizData.length === 0) return;
                
                const question = this.quizData[this.currentQuestion];
                if (!this.reasoningEl || !this.reasoningTextEl) return;
                
                if (this.reasoningEl.style.display === 'block') {
                    this.reasoningEl.style.display = 'none';
                } else {
                    // Create enhanced reasoning with separate incorrect reasonings
                    let reasoningHTML = `
                        <div class="reasoning-correct">
                            <div class="learning-reasoning-title">
                                <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                <span>Correct Reasoning:</span>
                            </div>
                            <div>${question.correctReasoning || 'No reasoning provided.'}</div>
                        </div>
                    `;
                    
                    // Add incorrect reasonings if available
                    if (question.incorrectReasonings && question.incorrectReasonings.some(r => r && r.trim())) {
                        reasoningHTML += `
                            <div class="reasoning-incorrect">
                                <div class="learning-reasoning-title">
                                    <i class="fas fa-times-circle" style="color: var(--warning);"></i>
                                    <span>Incorrect Reasonings:</span>
                                </div>
                        `;
                        
                        question.incorrectReasonings.forEach((reasoning, index) => {
                            if (reasoning && reasoning.trim()) {
                                const optionLetter = String.fromCharCode(65 + index);
                                reasoningHTML += `
                                    <div class="reasoning-incorrect-item">
                                        <div class="reasoning-incorrect-label">
                                            <i class="fas fa-times"></i> Option ${optionLetter} Incorrect:
                                        </div>
                                        <div class="reasoning-incorrect-text">${reasoning}</div>
                                    </div>
                                `;
                            }
                        });
                        
                        reasoningHTML += `</div>`;
                    }
                    
                    this.reasoningTextEl.innerHTML = reasoningHTML;
                    this.reasoningEl.style.display = 'block';
                    
                    // Re-render KaTeX in reasoning
                    if (window.renderMathInElement) {
                        setTimeout(() => {
                            renderMathInElement(this.reasoningEl, {
                                delimiters: [
                                    {left: '$$', right: '$$', display: true},
                                    {left: '$', right: '$', display: false},
                                    {left: '\\(', right: '\\)', display: false},
                                    {left: '\\[', right: '\\]', display: true}
                                ]
                            });
                        }, 50);
                    }
                }
            },

            async submitTest(isTimeout = false) {
                if (!isTimeout && !confirm('Are you sure you want to submit the quiz?')) {
                    return;
                }
                
                clearInterval(this.totalTimeInterval);
                clearInterval(this.questionTimeInterval);

                let correct = 0;
                let incorrect = 0;
                let unanswered = 0;

                this.quizData.forEach((question, index) => {
                    if (this.userAnswers[index] === null) {
                        unanswered++;
                    } else if (this.userAnswers[index] === question.correctAnswer) {
                        correct++;
                    } else {
                        incorrect++;
                    }
                });

                const totalQuestions = this.quizData.length;
                const totalScore = (correct * this.MARK_PER_MCQ) - (incorrect * this.NEGATIVE_MARKING);
                const totalMarks = totalQuestions * this.MARK_PER_MCQ;
                const percentage = totalMarks > 0 ? ((correct / totalMarks) * 100).toFixed(1) : 0;

                const savedStudentData = JSON.parse(localStorage.getItem('quizSystemStudentData') || '{}');
                const studentEmail = localStorage.getItem('quizSystemStudentEmail') || savedStudentData['Email'];
                
                // Update DMC with student information
                document.getElementById('dmc-student-name').textContent = savedStudentData['Student Name'] || 'Student';
                document.getElementById('dmc-father-name').textContent = savedStudentData['Father Name'] || 'Father';
                document.getElementById('dmc-quiz-type').textContent = this.selectedQuizSubject;
                
                // Update DMC student details table
                const dmcStudentDetails = document.getElementById('dmc-student-details');
                dmcStudentDetails.innerHTML = `
                    <tr>
                        <td>Student Name</td>
                        <td>${savedStudentData['Student Name'] || 'N/A'}</td>
                    </tr>
                    <tr>
                        <td>Father's Name</td>
                        <td>${savedStudentData['Father Name'] || 'N/A'}</td>
                    </tr>
                    <tr>
                        <td>Email Address</td>
                        <td>${savedStudentData['Email'] || 'N/A'}</td>
                    </tr>
                    <tr>
                        <td>Quiz Type</td>
                        <td>${this.selectedQuizSubject}</td>
                    </tr>
                    <tr>
                        <td>Total Questions</td>
                        <td>${totalQuestions}</td>
                    </tr>
                    <tr>
                        <td>Test Date</td>
                        <td>${new Date().toLocaleDateString()}</td>
                    </tr>
                `;
                
                // Update DMC performance metrics
                document.getElementById('dmc-correct').textContent = correct;
                document.getElementById('dmc-incorrect').textContent = incorrect;
                document.getElementById('dmc-unanswered').textContent = unanswered;
                document.getElementById('dmc-score').textContent = `${correct}/${totalMarks}`;
                document.getElementById('dmc-issue-date').textContent = new Date().toLocaleDateString();
                
                // Update performance level text
                const performanceLevel = percentage >= 80 ? 'excellent' : 
                                       percentage >= 60 ? 'good' : 
                                       percentage >= 40 ? 'average' : 'needs improvement';
                document.getElementById('dmc-performance-level').textContent = performanceLevel;
                
                // Send quiz results to Google Sheet
                if (studentEmail && this.studentAccessCode) {
                    try {
                        const response = await fetch(QUIZ_SYSTEM_SCRIPT_URL, {
                            method: 'POST',
                            body: JSON.stringify({
                                type: 'submit_result',
                                accessCode: this.studentAccessCode,
                                email: studentEmail,
                                subject: this.selectedQuizSubject,
                                total: totalQuestions,
                                correct: correct,
                                incorrect: incorrect,
                                score: correct,
                                questionsUsed: this.questionKeys
                            })
                        });
                        
                        const result = await response.json();
                        
                        if (result.success) {
                            this.showQuizNotification('Results Submitted', 'Your results have been submitted successfully! DMC has been generated.', 'info');
                        } else {
                            this.showQuizNotification('Submission Error', result.message || 'Failed to submit results', 'error');
                        }
                    } catch (error) {
                        this.showQuizNotification('Submission Error', 'Network error. Results saved locally.', 'warning');
                    }
                }

                this.showPage('quiz-system-results-page');
            },

            restartTest() {
                if (!this.ENABLE_RETAKE_FULL) {
                    this.showQuizNotification('Retake Disabled', 'Retake full test feature is disabled for this quiz.', 'warning');
                    return;
                }
                
                if (confirm('Are you sure you want to retake the full test? Your current progress will be lost.')) {
                    this.currentQuestion = 0;
                    this.userAnswers = Array(this.quizData.length).fill(null);
                    const timePerMCQ = parseInt(this.timePerMcqSelect?.value) || this.DEFAULT_TIME_PER_MCQ;
                    this.timeLeft = this.quizData.length * timePerMCQ;
                    
                    this.showPage('quiz-system-quiz-page');
                    this.initQuiz(timePerMCQ);
                }
            },

            retakeIncorrect() {
                if (!this.ENABLE_RETAKE_INCORRECT) {
                    this.showQuizNotification('Retake Disabled', 'Retake incorrect questions feature is disabled for this quiz.', 'warning');
                    return;
                }
                
                const incorrectIndices = this.quizData.map((question, index) => {
                    const isIncorrect = this.userAnswers[index] !== null && 
                                        this.userAnswers[index] !== question.correctAnswer;
                    return isIncorrect ? index : -1;
                }).filter(index => index !== -1);
                
                if (incorrectIndices.length === 0) {
                    this.showQuizNotification('No Incorrect Questions', 'You have no incorrect questions to retake!', 'info');
                    return;
                }
                
                const incorrectQuestions = incorrectIndices.map(index => this.quizData[index]);
                this.quizData = incorrectQuestions;
                this.currentQuestion = 0;
                this.userAnswers = Array(this.quizData.length).fill(null);
                const timePerMCQ = parseInt(this.timePerMcqSelect?.value) || this.DEFAULT_TIME_PER_MCQ;
                this.timeLeft = this.quizData.length * timePerMCQ;
                
                this.showPage('quiz-system-quiz-page');
                this.initQuiz(timePerMCQ);
            },

            viewAllMcqs() {
                if (!this.allMcqsList) return;
                
                this.allMcqsList.innerHTML = '';
                this.quizData.forEach((question, index) => {
                    const mcqItem = document.createElement('div');
                    mcqItem.classList.add('quiz-system-all-mcq-item');
                    
                    let optionsHtml = '';
                    question.options.forEach((option, optIndex) => {
                        const isCorrect = optIndex === question.correctAnswer;
                        optionsHtml += `
                            <div class="quiz-system-all-mcq-option ${isCorrect ? 'correct' : ''}">
                                ${String.fromCharCode(65 + optIndex)}) ${option}
                            </div>
                        `;
                    });
                    
                    // Create enhanced reasoning for all MCQs view
                    let reasoningHTML = `
                        <div class="reasoning-correct" style="margin-bottom: 6px;">
                            <strong>Correct Reasoning:</strong> ${question.correctReasoning || 'No reasoning provided.'}
                        </div>
                    `;
                    
                    // Add incorrect reasonings if available
                    if (question.incorrectReasonings && question.incorrectReasonings.some(r => r && r.trim())) {
                        reasoningHTML += `<div class="reasoning-incorrect">`;
                        reasoningHTML += `<strong>Incorrect Reasonings:</strong><br>`;
                        
                        question.incorrectReasonings.forEach((reasoning, idx) => {
                            if (reasoning && reasoning.trim()) {
                                const optionLetter = String.fromCharCode(65 + idx);
                                reasoningHTML += `<div style="margin-top: 3px;"><strong>${optionLetter}:</strong> ${reasoning}</div>`;
                            }
                        });
                        
                        reasoningHTML += `</div>`;
                    }
                    
                    mcqItem.innerHTML = `
                        <div class="quiz-system-question-text">${index + 1}. ${question.question}</div>
                        <div class="quiz-system-all-mcq-options">
                            ${optionsHtml}
                        </div>
                        <div class="quiz-system-all-mcq-reasoning">
                            <strong>Subject:</strong> ${question.subject || 'N/A'} | 
                            <strong>Topic:</strong> ${question.topic || 'General'}<br>
                            ${reasoningHTML}
                        </div>
                    `;
                    this.allMcqsList.appendChild(mcqItem);
                });
                
                this.showPage('quiz-system-all-mcqs-page');
                
                // Re-render KaTeX in all MCQs view
                if (window.renderMathInElement) {
                    setTimeout(() => {
                        renderMathInElement(this.allMcqsList, {
                            delimiters: [
                                {left: '$$', right: '$$', display: true},
                                {left: '$', right: '$', display: false},
                                {left: '\\(', right: '\\)', display: false},
                                {left: '\\[', right: '\\]', display: true}
                            ]
                        });
                    }, 100);
                }
            },

            handleNotificationResponse(continueQuiz) {
                this.hideQuizNotification();
                if (continueQuiz) {
                    // Continue quiz logic here
                } else {
                    // Start fresh logic here
                }
            },

            viewHistory() {
                // History view implementation
                alert('History feature coming soon!');
            }
        };
    </script>
</body>
</html>